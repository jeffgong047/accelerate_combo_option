
Generating frontier for markets:   0%|                                               | 0/97 [00:00<?, ?it/s]
There are 32 buy orders and 18 sell orders
#####Generating combinatorial/book/STOCK_2_SEED_2_book_GS_MSFT.npy with size 50 and noise 0.25#####
Starting async computation for iteration 3
> /common/home/hg343/Research/accelerate_combo_option/src/combo_stock_frontier_data_preprocessor.py(579)<module>()
-> result = synthetic_combo_frontier_generation(opt_orders_df, offset = args.offset)
> /common/home/hg343/Research/accelerate_combo_option/src/combo_stock_frontier_data_preprocessor.py(79)synthetic_combo_frontier_generation()
-> original_opt_buy_book = original_orders_df.where(original_orders_df['transaction_type'] == 1).dropna()
Set parameter Username
Generating frontier for markets:   0%|                                               | 0/97 [00:00<?, ?it/s]/common/home/hg343/Research/accelerate_combo_option/src/combo_stock_frontier_data_preprocessor.py:79: FutureWarning: The default dtype for empty Series will be 'object' instead of 'float64' in a future version. Specify a dtype explicitly to silence this warning.
  original_opt_buy_book = original_orders_df.where(original_orders_df['transaction_type'] == 1).dropna()
Checking buy side options:   9%|███▉                                         | 2/23 [00:00<00:05,  3.56it/s]
Int64Index([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16,
            17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31],
           dtype='int64') {1, 5, 6, 12, 15, 16, 18, 25, 28}
Int64Index([32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48,
            49],
           dtype='int64') {33, 34, 35, 36, 41, 42, 44, 45, 46, 47, 48}
23
7

Checking buy side options:  48%|█████████████████████                       | 11/23 [00:02<00:02,  4.65it/s]
original bid: 59.21,quoted bid: 59.21
original bid: 1.5,quoted bid: 1.5

Checking buy side options:  87%|██████████████████████████████████████▎     | 20/23 [00:04<00:00,  4.11it/s]
original bid: 5.32,quoted bid: 5.319999999999999
original bid: 0.05,quoted bid: 0.05
Checking buy side options: 100%|████████████████████████████████████████████| 23/23 [00:05<00:00,  5.22it/s]
Checking sell side options:   0%|                                                     | 0/7 [00:00<?, ?it/s]
original bid: 47.57,quoted bid: 47.57
original bid: 1.06,quoted bid: 1.06
original ask: 37.24,
quoted ask: 362.5699999999997
buy 1.0 from 9.0(7.0+-1.0,2496.5) at 10000.0
sell 1.0 to 8.0(5.0+-1.0,1795.0) at 0.92
sell 1.0000000000000002 to 1.0(2.0+-1.0,340.0) at 0.15
order to quote: option1                                     9.00
option2                                     7.00
C=Call, P=Put                              -1.00
Strike Price of the Option Times 1000    2496.50
transaction_type                            0.00
B/A_price                                  37.24
Name: 32, dtype: float64
quote_price: 362.5699999999997
> /common/home/hg343/Research/accelerate_combo_option/src/combo_stock_frontier_data_preprocessor.py(266)synthetic_combo_frontier_generation()
-> for option_index in tqdm(range(len(opt_sell_book_holder)), desc='Checking sell side options'):
original ask: 64.47,
quoted ask: 10000.0
order to quote: option1                                    2.00
option2                                   -1.00
C=Call, P=Put                              1.00
Strike Price of the Option Times 1000    214.00
transaction_type                           0.00
B/A_price                                 64.47
Name: 37, dtype: float64
quote_price: 10000.0
> /common/home/hg343/Research/accelerate_combo_option/src/combo_stock_frontier_data_preprocessor.py(266)synthetic_combo_frontier_generation()

Checking sell side options:  14%|██████▍                                      | 1/7 [00:12<01:12, 12.10s/it]
original ask: 0.03,
quoted ask: 156.45367412086307
buy 0.41521948866372965 from 9.0(8.0+-1.0,2596.0) at 1.5
buy 1.0 from 3.0(1.0+-1.0,515.5) at 10000.0
sell 0.4615371963744828 to 8.0(5.0+-1.0,1795.0) at 0.92
sell 0.40281398548748465 to 7.0(5.0+-1.0,1510.5) at 0.11
sell 0.7171972986008484 to 1.0(2.0+-1.0,340.0) at 0.15
order to quote: option1                                    3.00
option2                                    1.00
C=Call, P=Put                             -1.00
Strike Price of the Option Times 1000    515.50
transaction_type                           0.00
B/A_price                                  0.03
Name: 38, dtype: float64
quote_price: 156.45367412086307
> /common/home/hg343/Research/accelerate_combo_option/src/combo_stock_frontier_data_preprocessor.py(266)synthetic_combo_frontier_generation()


Checking sell side options:  43%|███████████████████▎                         | 3/7 [00:28<00:37,  9.46s/it]
original ask: 0.92,
quoted ask: 11.589362845445066
buy 1.0 from 8.0(5.0+-1.0,1795.0) at 10000.0
sell 0.3093654042988741 to 9.0(7.0+-1.0,2496.5) at 37.24
sell 0.779682702149436 to 3.0(1.0+-1.0,515.5) at 0.03
sell 0.4109518935516891 to 7.0(5.0+-1.0,1510.5) at 0.11
order to quote: option1                                     8.00
option2                                     5.00
C=Call, P=Put                              -1.00
Strike Price of the Option Times 1000    1795.00
transaction_type                            0.00
B/A_price                                   0.92
Name: 39, dtype: float64
quote_price: 11.589362845445066
> /common/home/hg343/Research/accelerate_combo_option/src/combo_stock_frontier_data_preprocessor.py(266)synthetic_combo_frontier_generation()

Checking sell side options:  57%|█████████████████████████▋                   | 4/7 [00:31<00:20,  6.98s/it]
original ask: 0.11,
quoted ask: 0.5157103064066177
buy 1.0 from 7.0(5.0+-1.0,1510.5) at 10000.0
sell 1.0 to 3.0(1.0+-1.0,515.5) at 0.03
sell 0.3649025069637883 to 8.0(5.0+-1.0,1795.0) at 0.92
sell 1.0 to 1.0(2.0+-1.0,340.0) at 0.15
order to quote: option1                                     7.00
option2                                     5.00
C=Call, P=Put                              -1.00
Strike Price of the Option Times 1000    1510.50
transaction_type                            0.00
B/A_price                                   0.11
Name: 40, dtype: float64
quote_price: 0.5157103064066177
> /common/home/hg343/Research/accelerate_combo_option/src/combo_stock_frontier_data_preprocessor.py(266)synthetic_combo_frontier_generation()

Checking sell side options:  71%|████████████████████████████████▏            | 5/7 [00:33<00:10,  5.29s/it]
original ask: 61.08,
quoted ask: 6745.11319921522
buy 0.02666886177625085 from 9.0(8.0+-1.0,2596.0) at 1.5
buy 2.2366729489883826e-05 from 7.0(-5.0+-1.0,1125.0) at 309.55
buy 0.33333333333333337 from 6.0(-5.0+1.0,600.0) at 10000.0
sell 1.0 to 2.0(-1.0+1.0,214.0) at 64.47
sell 0.027805887503487982 to 3.0(1.0+-1.0,515.5) at 0.03
sell 0.01423157201170849 to 7.0(5.0+-1.0,1510.5) at 0.11
sell 0.14039875190429923 to 1.0(2.0+-1.0,340.0) at 0.15
order to quote: option1                                    6.00
option2                                   -5.00
C=Call, P=Put                              1.00
Strike Price of the Option Times 1000    600.00
transaction_type                           0.00
B/A_price                                 61.08
Name: 43, dtype: float64
quote_price: 6745.11319921522
> /common/home/hg343/Research/accelerate_combo_option/src/combo_stock_frontier_data_preprocessor.py(266)synthetic_combo_frontier_generation()

Checking sell side options:  86%|██████████████████████████████████████▌      | 6/7 [00:37<00:04,  4.65s/it]
original ask: 0.15,
quoted ask: 9.191374882555465
buy 1.0 from 1.0(2.0+-1.0,340.0) at 10000.0
sell 0.15032884434700905 to 9.0(7.0+-1.0,2496.5) at 37.24
sell 0.058826599853846966 to 6.0(-5.0+1.0,600.0) at 61.08
order to quote: option1                                    1.00
option2                                    2.00
C=Call, P=Put                             -1.00
Strike Price of the Option Times 1000    340.00
transaction_type                           0.00
B/A_price                                  0.15
Name: 49, dtype: float64
quote_price: 9.191374882555465
> /common/home/hg343/Research/accelerate_combo_option/src/combo_stock_frontier_data_preprocessor.py(266)synthetic_combo_frontier_generation()

Checking sell side options: 100%|█████████████████████████████████████████████| 7/7 [00:41<00:00,  4.57s/it]
    transaction_type  B/A_price  belongs_to_frontier
0                1.0     476.75                  1.0
2                1.0     170.59                  0.0
3                1.0       7.79                  0.0
4                1.0     150.65                  0.0
7                1.0      59.21                  1.0
8                1.0       1.50                  1.0
9                1.0      67.80                  0.0
10               1.0      24.58                  0.0
11               1.0      13.70                  1.0
13               1.0       0.01                  0.0
14               1.0      69.18                  0.0
17               1.0      55.42                  0.0
19               1.0       5.32                  1.0
20               1.0     284.39                  0.0
21               1.0     309.55                  0.0
22               1.0       0.05                  1.0
23               1.0     195.50                  0.0
24               1.0       0.18                  1.0
26               1.0      23.97                  0.0
27               1.0     236.41                  0.0
29               1.0      47.57                  1.0
30               1.0       1.06                  1.0
31               1.0     153.46                  0.0
32               0.0      37.24                  1.0
37               0.0      64.47                  1.0
38               0.0       0.03                  1.0
39               0.0       0.92                  1.0
40               0.0       0.11                  1.0
43               0.0      61.08                  1.0
49               0.0       0.15                  1.0
> /common/home/hg343/Research/accelerate_combo_option/src/combo_stock_frontier_data_preprocessor.py(582)<module>()
-> async_result = pool.apply_async(run_with_timeout, (opt_orders_df, args.offset))
Generating frontier for markets:   0%|                                               | 0/97 [09:18<?, ?it/s]
Traceback (most recent call last):
  File "/common/home/hg343/Research/accelerate_combo_option/src/combo_stock_frontier_data_preprocessor.py", line 582, in <module>
    async_result = pool.apply_async(run_with_timeout, (opt_orders_df, args.offset))
  File "/common/home/hg343/Research/accelerate_combo_option/src/combo_stock_frontier_data_preprocessor.py", line 582, in <module>
    async_result = pool.apply_async(run_with_timeout, (opt_orders_df, args.offset))
  File "/common/home/hg343/anaconda3/lib/python3.9/bdb.py", line 88, in trace_dispatch
    return self.dispatch_line(frame)
  File "/common/home/hg343/anaconda3/lib/python3.9/bdb.py", line 112, in dispatch_line
    self.user_line(frame)
  File "/common/home/hg343/anaconda3/lib/python3.9/pdb.py", line 262, in user_line
    self.interaction(frame, None)
  File "/common/home/hg343/anaconda3/lib/python3.9/pdb.py", line 357, in interaction
    self._cmdloop()
  File "/common/home/hg343/anaconda3/lib/python3.9/pdb.py", line 322, in _cmdloop
    self.cmdloop()
  File "/common/home/hg343/anaconda3/lib/python3.9/cmd.py", line 126, in cmdloop
    line = input(self.prompt)
  File "/common/home/hg343/Research/accelerate_combo_option/src/combo_stock_frontier_data_preprocessor.py", line 62, in signal_handler
    sys.exit(1)
  File "/common/home/hg343/anaconda3/lib/python3.9/site-packages/wandb/sdk/lib/exit_hooks.py", line 36, in exit
    self._orig_exit(orig_code)  # type: ignore
SystemExit: 1