
Generating frontier for markets:   0%|                                                              | 0/20 [00:00<?, ?it/s]
There are 25 buy orders and 25 sell orders
#####Generating market 0 with size 50 and noise 0.015625#####
Starting computation for iteration 0
Generating frontier for markets:   0%|                                                              | 0/20 [00:00<?, ?it/s]/common/home/hg343/Research/accelerate_combo_option/src/market.py:264: FutureWarning: The default dtype for empty Series will be 'object' instead of 'float64' in a future version. Specify a dtype explicitly to silence this warning.
  frontier_labels = pd.Series(None, index=orders.index)
checking match False -0.0
Processing order 0 (1/37)
checking match False -0.0
quote_price: 69.50942087657864, original_price: 68.04
Processing order 1 (2/37)
checking match False -0.0
quote_price: 62.48707286113185, original_price: 63.33
Processing order 3 (3/37)
checking match False -0.0
quote_price: 34.511693024402106, original_price: 36.19
Processing order 4 (4/37)
checking match False -0.0
quote_price: 154.9203211239339, original_price: 156.18
Processing order 5 (5/37)
checking match False -0.0
quote_price: 182.322830549896, original_price: 186.12
Processing order 6 (6/37)
checking match False -0.0
quote_price: 18.90034230810692, original_price: 19.82
Processing order 7 (7/37)
checking match False -0.0
quote_price: 180.87296302568814, original_price: 182.73
Processing order 8 (8/37)
checking match False -0.0
quote_price: 105.08140564471498, original_price: 107.05
Processing order 9 (9/37)
checking match False -0.0
quote_price: -0.0, original_price: 0.52
Processing order 10 (10/37)
checking match False -0.0
quote_price: 15.201653626839953, original_price: 22.92
Processing order 11 (11/37)
checking match False -0.0
quote_price: 104.6923329186927, original_price: 106.16
Processing order 12 (12/37)
checking match False -0.0
quote_price: 51.57869766513667, original_price: 53.02
Processing order 13 (13/37)
checking match False -0.0
quote_price: -0.0, original_price: 2.35
Processing order 14 (14/37)
checking match False -0.0
Mechanism solver timed out after 30 seconds
Timeout in mechanism solver for buy order quote
Timeout in price quote for order 14
Processing order 16 (15/37)
checking match False -0.0
quote_price: -0.0, original_price: 0.02
Processing order 17 (16/37)
checking match False -0.0
quote_price: 222.8740224606763, original_price: 226.09
Processing order 18 (17/37)
checking match False -0.0
quote_price: 55.9843771268775, original_price: 57.9
Processing order 19 (18/37)
checking match False -0.0
quote_price: 169.4620698518357, original_price: 169.38
Processing order 20 (19/37)
checking match False -0.0
quote_price: 32.276528696461384, original_price: 28.41
Processing order 21 (20/37)
checking match False -0.0
quote_price: 77.16105947573753, original_price: 73.64
Processing order 22 (21/37)
checking match False -0.0
quote_price: 155.80588433464325, original_price: 156.52
Processing order 23 (22/37)
checking match False -0.0
quote_price: 89.38759856041953, original_price: 90.72
Processing order 24 (23/37)
checking match False -0.0
quote_price: -0.0, original_price: 0.3
Processing order 25 (24/37)
checking match False -0.0
quote_price: 0.0, original_price: 53.73
Processing order 26 (25/37)
checking match False -0.0
quote_price: 0.0, original_price: 149.36
Processing order 27 (26/37)
checking match False -0.0
quote_price: 0.0, original_price: 11.82
Processing order 28 (27/37)
checking match False -0.0
quote_price: 0.0, original_price: 1.03
Processing order 31 (28/37)
checking match False -0.0
quote_price: 0.0, original_price: 174.67
Processing order 32 (29/37)
checking match False -0.0
quote_price: 0.0, original_price: 176.88
Processing order 36 (30/37)
checking match False -0.0
quote_price: 0.0, original_price: 30.24
Processing order 38 (31/37)
checking match False -0.0
quote_price: 0.0, original_price: 10.59
Processing order 39 (32/37)
checking match False -0.0
Mechanism solver timed out after 30 seconds
Timeout in mechanism solver for sell order quote
Timeout in price quote for order 39
Processing order 41 (33/37)
checking match False -0.0
quote_price: 0.0, original_price: 1.24
Processing order 42 (34/37)
checking match False -0.0
quote_price: 0.0, original_price: 13.98
Processing order 43 (35/37)
checking match False -0.0
quote_price: 0.0, original_price: 26.91
Processing order 46 (36/37)
checking match False -0.0
quote_price: 0.0, original_price: 69.58
Processing order 48 (37/37)
checking match False -0.0
/common/home/hg343/Research/accelerate_combo_option/src/market.py:264: FutureWarning: The default dtype for empty Series will be 'object' instead of 'float64' in a future version. Specify a dtype explicitly to silence this warning.
  frontier_labels = pd.Series(None, index=orders.index)
quote_price: 0.0, original_price: 9.87
    option1  option2  C=Call, P=Put  ...  B/A_price  liquidity  belongs_to_frontier
0      -3.0      5.0           -1.0  ...      68.04          1                  0.0
1       1.0      3.0            1.0  ...      63.33          1                  1.0
3       2.0     -1.0           -1.0  ...      36.19          1                  1.0
4      -2.0      9.0            1.0  ...     156.18          1                  1.0
5       1.0      7.0            1.0  ...     186.12          1                  1.0
6       2.0     -1.0           -1.0  ...      19.82          1                  1.0
7       6.0      5.0            1.0  ...     182.73          1                  1.0
8       3.0      1.0            1.0  ...     107.05          1                  1.0
9       1.0      1.0            1.0  ...       0.52          1                  1.0
10      4.0      1.0           -1.0  ...      22.92          1                  1.0
11      3.0      2.0            1.0  ...     106.16          1                  1.0
12      3.0      1.0           -1.0  ...      53.02          1                  1.0
13      2.0     -1.0           -1.0  ...       2.35          1                  1.0
14      1.0     -2.0           -1.0  ...      65.73          1                  NaN
16      2.0      1.0           -1.0  ...       0.02          1                  1.0
17      7.0      5.0           -1.0  ...     226.09          1                  1.0
18      1.0      1.0           -1.0  ...      57.90          1                  1.0
19     -2.0      7.0            1.0  ...     169.38          1                  0.0
20     -5.0      7.0           -1.0  ...      28.41          1                  0.0
21      1.0      6.0           -1.0  ...      73.64          1                  0.0
22      4.0      9.0            1.0  ...     156.52          1                  1.0
23      5.0     -3.0            1.0  ...      90.72          1                  1.0
24      8.0      5.0           -1.0  ...       0.30          1                  1.0
25      2.0     -3.0           -1.0  ...      53.73          1                  1.0
26      3.0      2.0           -1.0  ...     149.36          1                  1.0
27      8.0     -7.0            1.0  ...      11.82          1                  1.0
28      1.0     -1.0            1.0  ...       1.03          1                  1.0
31      8.0     -5.0            1.0  ...     174.67          1                  1.0
32      3.0      8.0           -1.0  ...     176.88          1                  1.0
36     -4.0      7.0            1.0  ...      30.24          1                  1.0
38      6.0      1.0           -1.0  ...      10.59          1                  1.0
39      5.0     -1.0            1.0  ...       4.05          1                  NaN
41      2.0      1.0           -1.0  ...       1.24          1                  1.0
42      6.0      5.0            1.0  ...      13.98          1                  1.0
43      2.0      1.0           -1.0  ...      26.91          1                  1.0
46      4.0      7.0            1.0  ...      69.58          1                  1.0
48      8.0     -3.0           -1.0  ...       9.87          1                  1.0
[37 rows x 8 columns]
Processing order 0 (1/37)
checking match False -0.0
quote_price: 68.56760510937906, original_price: 68.04
Processing order 1 (2/37)
checking match False -0.0
quote_price: 62.48707286113234, original_price: 63.33
Processing order 3 (3/37)
checking match False -0.0
quote_price: 34.51169302440152, original_price: 36.19
Processing order 4 (4/37)
checking match False -0.0
quote_price: 154.2942166666587, original_price: 156.18
Processing order 5 (5/37)
checking match False -0.0
quote_price: 181.64098452286171, original_price: 186.12
Processing order 6 (6/37)
checking match False -0.0
quote_price: 18.90034230810636, original_price: 19.82
Processing order 7 (7/37)
checking match False -0.0
quote_price: 179.33911290074826, original_price: 182.73
Processing order 8 (8/37)
checking match False -0.0
quote_price: 104.82596608381388, original_price: 107.05
Processing order 9 (9/37)
checking match False -0.0
quote_price: -0.0, original_price: 0.52
Processing order 10 (10/37)
checking match False -0.0
quote_price: 15.110082840239016, original_price: 22.92
Processing order 11 (11/37)
checking match False -0.0
quote_price: 104.58401122546891, original_price: 106.16
Processing order 12 (12/37)
checking match False -0.0
quote_price: 51.57869766513669, original_price: 53.02
Processing order 13 (13/37)
checking match False -0.0
quote_price: -0.0, original_price: 2.35
Processing order 14 (14/37)
checking match False -0.0
Mechanism solver timed out after 30 seconds
Timeout in mechanism solver for buy order quote
Timeout in price quote for order 14
Processing order 16 (15/37)
checking match False -0.0
quote_price: -0.0, original_price: 0.02
Processing order 17 (16/37)
checking match False -0.0
quote_price: 209.73272944124224, original_price: 226.09
Processing order 18 (17/37)
checking match False -0.0
quote_price: 55.98437712687747, original_price: 57.9
Processing order 19 (18/37)
checking match False -0.0
quote_price: 167.3506026271473, original_price: 169.38
Processing order 20 (19/37)
checking match False -0.0
quote_price: 31.715426712445602, original_price: 28.41
Processing order 21 (20/37)
checking match False -0.0
quote_price: 76.12852716400002, original_price: 73.64
Processing order 22 (21/37)
checking match False -0.0
quote_price: 154.3175072840291, original_price: 156.52
Processing order 23 (22/37)
checking match False -0.0
quote_price: 88.69159932908703, original_price: 90.72
Processing order 24 (23/37)
checking match False -0.0
quote_price: -0.0, original_price: 0.3
Processing order 25 (24/37)
checking match False -0.0
quote_price: 0.0, original_price: 53.73
Processing order 26 (25/37)
checking match False -0.0
quote_price: 0.0, original_price: 149.36
Processing order 27 (26/37)
checking match False -0.0
quote_price: 0.0, original_price: 11.82
Processing order 28 (27/37)
checking match False -0.0
quote_price: 0.0, original_price: 1.03
Processing order 31 (28/37)
checking match False -0.0
quote_price: 0.0, original_price: 174.67
Processing order 32 (29/37)
checking match False -0.0
quote_price: 0.0, original_price: 176.88
Processing order 36 (30/37)
checking match False -0.0
quote_price: 0.0, original_price: 30.24
Processing order 38 (31/37)
checking match False -0.0
quote_price: 0.0, original_price: 10.59
Processing order 39 (32/37)
checking match False -0.0
quote_price: 0.0, original_price: 4.05
Processing order 41 (33/37)
checking match False -0.0
quote_price: 0.0, original_price: 1.24
Processing order 42 (34/37)
checking match False -0.0
quote_price: 0.0, original_price: 13.98
Processing order 43 (35/37)
checking match False -0.0
quote_price: 0.0, original_price: 26.91
Processing order 46 (36/37)
checking match False -0.0
quote_price: 0.0, original_price: 69.58
Processing order 48 (37/37)
checking match False -0.0
Traceback (most recent call last):
  File "/common/home/hg343/Research/accelerate_combo_option/src/combo_stock_frontier_data_preprocessor_forked.py", line 165, in <module>
    frontier_option_label_compared = synthetic_combo_frontier_generation(opt_buy_book, opt_sell_book, opt_l = args.offset, debug=0)
  File "/common/home/hg343/Research/accelerate_combo_option/src/combo_stock_frontier_data_preprocessor.py", line 75, in synthetic_combo_frontier_generation
    original_opt_buy_book = original_opt_buy_book[['option1', 'option2', 'C=Call, P=Put','Strike Price of the Option Times 1000', 'transaction_type','B/A_price']]
IndexError: only integers, slices (`:`), ellipsis (`...`), numpy.newaxis (`None`) and integer or boolean arrays are valid indices
Generating frontier for markets:   5%|██▌                                                | 1/20 [05:27<1:43:50, 327.94s/it]
quote_price: 0.0, original_price: 9.87
    option1  option2  C=Call, P=Put  ...  B/A_price  liquidity  belongs_to_frontier
0      -3.0      5.0           -1.0  ...      68.04          1                  0.0
1       1.0      3.0            1.0  ...      63.33          1                  1.0
3       2.0     -1.0           -1.0  ...      36.19          1                  1.0
4      -2.0      9.0            1.0  ...     156.18          1                  1.0
5       1.0      7.0            1.0  ...     186.12          1                  1.0
6       2.0     -1.0           -1.0  ...      19.82          1                  1.0
7       6.0      5.0            1.0  ...     182.73          1                  1.0
8       3.0      1.0            1.0  ...     107.05          1                  1.0
9       1.0      1.0            1.0  ...       0.52          1                  1.0
10      4.0      1.0           -1.0  ...      22.92          1                  1.0
11      3.0      2.0            1.0  ...     106.16          1                  1.0
12      3.0      1.0           -1.0  ...      53.02          1                  1.0
13      2.0     -1.0           -1.0  ...       2.35          1                  1.0
14      1.0     -2.0           -1.0  ...      65.73          1                  NaN
16      2.0      1.0           -1.0  ...       0.02          1                  1.0
17      7.0      5.0           -1.0  ...     226.09          1                  1.0
18      1.0      1.0           -1.0  ...      57.90          1                  1.0
19     -2.0      7.0            1.0  ...     169.38          1                  1.0
20     -5.0      7.0           -1.0  ...      28.41          1                  0.0
21      1.0      6.0           -1.0  ...      73.64          1                  0.0
22      4.0      9.0            1.0  ...     156.52          1                  1.0
23      5.0     -3.0            1.0  ...      90.72          1                  1.0
24      8.0      5.0           -1.0  ...       0.30          1                  1.0
25      2.0     -3.0           -1.0  ...      53.73          1                  1.0
26      3.0      2.0           -1.0  ...     149.36          1                  1.0
27      8.0     -7.0            1.0  ...      11.82          1                  1.0
28      1.0     -1.0            1.0  ...       1.03          1                  1.0
31      8.0     -5.0            1.0  ...     174.67          1                  1.0
32      3.0      8.0           -1.0  ...     176.88          1                  1.0
36     -4.0      7.0            1.0  ...      30.24          1                  1.0
38      6.0      1.0           -1.0  ...      10.59          1                  1.0
39      5.0     -1.0            1.0  ...       4.05          1                  1.0
41      2.0      1.0           -1.0  ...       1.24          1                  1.0
42      6.0      5.0            1.0  ...      13.98          1                  1.0
43      2.0      1.0           -1.0  ...      26.91          1                  1.0
46      4.0      7.0            1.0  ...      69.58          1                  1.0
48      8.0     -3.0           -1.0  ...       9.87          1                  1.0
[37 rows x 8 columns]
Error processing market 0: only integers, slices (`:`), ellipsis (`...`), numpy.newaxis (`None`) and integer or boolean arrays are valid indices
There are 27 buy orders and 23 sell orders
#####Generating market 1 with size 50 and noise 0.015625#####
Starting computation for iteration 1
checking match True 3.682967171065343
checking match False -0.0
Generating frontier for markets:   5%|██▌                                                | 1/20 [05:27<1:43:50, 327.94s/it]/common/home/hg343/Research/accelerate_combo_option/src/market.py:264: FutureWarning: The default dtype for empty Series will be 'object' instead of 'float64' in a future version. Specify a dtype explicitly to silence this warning.
  frontier_labels = pd.Series(None, index=orders.index)
checking match False -0.0
quote_price: -0.0, original_price: 0.53
Processing order 2 (2/37)
checking match False -0.0
quote_price: -0.0, original_price: 0.03
Processing order 3 (3/37)
checking match False -0.0
quote_price: 41.87701627381539, original_price: 45.18
Processing order 4 (4/37)
checking match False -0.0
quote_price: 19.627280064401653, original_price: 20.76
Processing order 5 (5/37)
checking match False -0.0
quote_price: -0.0, original_price: 0.09
Processing order 6 (6/37)
checking match False -0.0
quote_price: 15.61016169525077, original_price: 13.61
Processing order 7 (7/37)
checking match False -0.0
quote_price: 0.03, original_price: 0.03
Processing order 8 (8/37)
checking match False -0.0
quote_price: 40.300619374815774, original_price: 41.36
Processing order 9 (9/37)
checking match False -0.0
quote_price: 57.90864958972896, original_price: 58.19
Processing order 10 (10/37)
checking match False -0.0
quote_price: 146.88350482347585, original_price: 147.13
Processing order 13 (11/37)
checking match False -0.0
quote_price: -0.0, original_price: 0.02
Processing order 14 (12/37)
checking match False -0.0
quote_price: -0.0, original_price: 0.06
Processing order 15 (13/37)
checking match False -0.0
quote_price: -0.0, original_price: 0.04
Processing order 16 (14/37)
checking match False -0.0
quote_price: 69.24168589892953, original_price: 63.68
Processing order 17 (15/37)
checking match False -0.0
quote_price: 127.650485754893, original_price: 141.41
Processing order 18 (16/37)
checking match False -0.0
quote_price: 84.4835497450423, original_price: 87.64
Processing order 19 (17/37)
checking match False -0.0
quote_price: -0.0, original_price: 0.08
Processing order 20 (18/37)
checking match False -0.0
quote_price: -0.0, original_price: 3.11
Processing order 21 (19/37)
checking match False -0.0
quote_price: 175.13069420653088, original_price: 218.33
Processing order 22 (20/37)
checking match False -0.0
quote_price: 2.892639917375713, original_price: 7.03
Processing order 23 (21/37)
checking match False -0.0
quote_price: -0.0, original_price: 3.78
Processing order 24 (22/37)
checking match False -0.0
quote_price: 147.18672117476743, original_price: 154.96
Processing order 25 (23/37)
checking match False -0.0
quote_price: 21.54100844223451, original_price: 22.04
Processing order 26 (24/37)
checking match False -0.0
quote_price: 193.1680635310617, original_price: 191.55
Processing order 28 (25/37)
checking match False -0.0
quote_price: 0.0, original_price: 5.0
Processing order 29 (26/37)
checking match False -0.0
quote_price: 0.0, original_price: 433.82
Processing order 31 (27/37)
checking match False -0.0
quote_price: 0.0, original_price: 14.93
Processing order 33 (28/37)
checking match False -0.0
quote_price: 0.0, original_price: 21.06
Processing order 35 (29/37)
checking match False -0.0
quote_price: 0.0, original_price: 2.19
Processing order 37 (30/37)
checking match False -0.0
quote_price: 0.0, original_price: 2.33
Processing order 39 (31/37)
checking match False -0.0
quote_price: 0.0, original_price: 0.15
Processing order 42 (32/37)
checking match False -0.0
quote_price: 0.0, original_price: 90.03
Processing order 43 (33/37)
checking match False -0.0
quote_price: 0.0, original_price: 2.41
Processing order 44 (34/37)
checking match False -0.0
quote_price: 0.0, original_price: 62.63
Processing order 47 (35/37)
checking match False -0.0
quote_price: 0.0, original_price: 40.26
Processing order 48 (36/37)
checking match False -0.0
quote_price: 0.0, original_price: 6.37
Processing order 49 (37/37)
checking match False -0.0
/common/home/hg343/Research/accelerate_combo_option/src/market.py:264: FutureWarning: The default dtype for empty Series will be 'object' instead of 'float64' in a future version. Specify a dtype explicitly to silence this warning.
  frontier_labels = pd.Series(None, index=orders.index)
quote_price: 0.0, original_price: 0.11
    option1  option2  C=Call, P=Put  ...  B/A_price  liquidity  belongs_to_frontier
1       5.0      2.0           -1.0  ...       0.53          1                  1.0
2       2.0     -1.0            1.0  ...       0.03          1                  1.0
3       1.0      3.0            1.0  ...      45.18          1                  1.0
4       1.0      1.0           -1.0  ...      20.76          1                  1.0
5       8.0     -7.0            1.0  ...       0.09          1                  1.0
6      -1.0      2.0           -1.0  ...      13.61          1                  0.0
7       2.0     -1.0            1.0  ...       0.03          1                  0.0
8       3.0      7.0            1.0  ...      41.36          1                  1.0
9       4.0      1.0            1.0  ...      58.19          1                  1.0
10      7.0      2.0            1.0  ...     147.13          1                  1.0
13      3.0     -1.0           -1.0  ...       0.02          1                  1.0
14     -1.0      9.0           -1.0  ...       0.06          1                  1.0
15      3.0      1.0           -1.0  ...       0.04          1                  1.0
16      4.0     -5.0            1.0  ...      63.68          1                  0.0
17      9.0     -2.0           -1.0  ...     141.41          1                  1.0
18      3.0      1.0            1.0  ...      87.64          1                  1.0
19      5.0      4.0           -1.0  ...       0.08          1                  1.0
20      5.0      1.0            1.0  ...       3.11          1                  1.0
21      5.0     -3.0           -1.0  ...     218.33          1                  1.0
22      3.0     -4.0           -1.0  ...       7.03          1                  1.0
23      4.0     -3.0           -1.0  ...       3.78          1                  1.0
24      4.0      5.0            1.0  ...     154.96          1                  1.0
25      1.0     -1.0           -1.0  ...      22.04          1                  1.0
26      9.0     -2.0            1.0  ...     191.55          1                  0.0
28      8.0     -3.0           -1.0  ...       5.00          1                  1.0
29      9.0      2.0           -1.0  ...     433.82          1                  1.0
31      2.0      3.0            1.0  ...      14.93          1                  1.0
33      2.0     -1.0            1.0  ...      21.06          1                  1.0
35      3.0     -1.0           -1.0  ...       2.19          1                  1.0
37      8.0      9.0           -1.0  ...       2.33          1                  1.0
39     -1.0      3.0           -1.0  ...       0.15          1                  1.0
42      9.0      8.0            1.0  ...      90.03          1                  1.0
43      7.0      2.0           -1.0  ...       2.41          1                  1.0
44      9.0      7.0           -1.0  ...      62.63          1                  1.0
47      1.0      4.0            1.0  ...      40.26          1                  1.0
48      5.0      8.0           -1.0  ...       6.37          1                  1.0
49      7.0     -4.0            1.0  ...       0.11          1                  1.0
[37 rows x 8 columns]
Processing order 1 (1/37)
checking match False -0.0
quote_price: -0.0, original_price: 0.53
Processing order 2 (2/37)
checking match False -0.0
quote_price: -0.0, original_price: 0.03
Processing order 3 (3/37)
checking match False -0.0
quote_price: 41.87701627381534, original_price: 45.18
Processing order 4 (4/37)
checking match False -0.0
quote_price: 19.62728006440132, original_price: 20.76
Processing order 5 (5/37)
checking match False -0.0
quote_price: -0.0, original_price: 0.09
Processing order 6 (6/37)
checking match False -0.0
quote_price: 15.610161695250774, original_price: 13.61
Processing order 7 (7/37)
checking match False -0.0
quote_price: 0.03, original_price: 0.03
Processing order 8 (8/37)
checking match False -0.0
quote_price: 36.46039234245241, original_price: 41.36
Processing order 9 (9/37)
checking match False -0.0
quote_price: 57.90864958972893, original_price: 58.19
Processing order 10 (10/37)
checking match False -0.0
quote_price: 143.53767712617525, original_price: 147.13
Processing order 13 (11/37)
checking match False -0.0
quote_price: -0.0, original_price: 0.02
Processing order 14 (12/37)
checking match False -0.0
quote_price: -0.0, original_price: 0.06
Processing order 15 (13/37)
checking match False -0.0
quote_price: -0.0, original_price: 0.04
Processing order 16 (14/37)
checking match False -0.0
quote_price: 68.10046253128237, original_price: 63.68
Processing order 17 (15/37)
checking match False -0.0
quote_price: 123.25296740922985, original_price: 141.41
Processing order 18 (16/37)
checking match False -0.0
quote_price: 84.4835497450288, original_price: 87.64
Processing order 19 (17/37)
checking match False -0.0
quote_price: -0.0, original_price: 0.08
Processing order 20 (18/37)
checking match False -0.0
quote_price: -0.0, original_price: 3.11
Processing order 21 (19/37)
checking match False -0.0
quote_price: 173.95085827411944, original_price: 218.33
Processing order 22 (20/37)
checking match False -0.0
quote_price: 2.8210832105585055, original_price: 7.03
Processing order 23 (21/37)
checking match False -0.0
quote_price: -0.0, original_price: 3.78
Processing order 24 (22/37)
checking match False -0.0
quote_price: 147.00798232032093, original_price: 154.96
Processing order 25 (23/37)
checking match False -0.0
quote_price: 21.5410084422274, original_price: 22.04
Processing order 26 (24/37)
checking match False -0.0
quote_price: 187.64344172999378, original_price: 191.55
Processing order 28 (25/37)
checking match False -0.0
quote_price: 0.0, original_price: 5.0
Processing order 29 (26/37)
checking match False -0.0
quote_price: 7.450066178104863e+18, original_price: 433.82
Processing order 31 (27/37)
checking match False -0.0
quote_price: 0.0, original_price: 14.93
Processing order 33 (28/37)
checking match False -0.0
quote_price: 0.0, original_price: 21.06
Processing order 35 (29/37)
checking match False -0.0
quote_price: 0.0, original_price: 2.19
Processing order 37 (30/37)
checking match False -0.0
quote_price: 0.0, original_price: 2.33
Processing order 39 (31/37)
checking match False -0.0
quote_price: 0.0, original_price: 0.15
Processing order 42 (32/37)
checking match False -0.0
quote_price: 4.3785238519692677e+18, original_price: 90.03
Processing order 43 (33/37)
checking match False -0.0
quote_price: 0.0, original_price: 2.41
Processing order 44 (34/37)
checking match False -0.0
quote_price: 0.0, original_price: 62.63
Processing order 47 (35/37)
checking match False -0.0
quote_price: 0.0, original_price: 40.26
Processing order 48 (36/37)
checking match False -0.0
quote_price: 0.0, original_price: 6.37
Processing order 49 (37/37)
checking match False -0.0
quote_price: 0.0, original_price: 0.11
    option1  option2  C=Call, P=Put  ...  B/A_price  liquidity  belongs_to_frontier
1       5.0      2.0           -1.0  ...       0.53          1                  1.0
2       2.0     -1.0            1.0  ...       0.03          1                  1.0
3       1.0      3.0            1.0  ...      45.18          1                  1.0
4       1.0      1.0           -1.0  ...      20.76          1                  1.0
5       8.0     -7.0            1.0  ...       0.09          1                  1.0
6      -1.0      2.0           -1.0  ...      13.61          1                  0.0
7       2.0     -1.0            1.0  ...       0.03          1                  0.0
8       3.0      7.0            1.0  ...      41.36          1                  1.0
9       4.0      1.0            1.0  ...      58.19          1                  1.0
10      7.0      2.0            1.0  ...     147.13          1                  1.0
13      3.0     -1.0           -1.0  ...       0.02          1                  1.0
14     -1.0      9.0           -1.0  ...       0.06          1                  1.0
15      3.0      1.0           -1.0  ...       0.04          1                  1.0
16      4.0     -5.0            1.0  ...      63.68          1                  0.0
17      9.0     -2.0           -1.0  ...     141.41          1                  1.0
18      3.0      1.0            1.0  ...      87.64          1                  1.0
19      5.0      4.0           -1.0  ...       0.08          1                  1.0
20      5.0      1.0            1.0  ...       3.11          1                  1.0
21      5.0     -3.0           -1.0  ...     218.33          1                  1.0
22      3.0     -4.0           -1.0  ...       7.03          1                  1.0
23      4.0     -3.0           -1.0  ...       3.78          1                  1.0
24      4.0      5.0            1.0  ...     154.96          1                  1.0
25      1.0     -1.0           -1.0  ...      22.04          1                  1.0
26      9.0     -2.0            1.0  ...     191.55          1                  1.0
28      8.0     -3.0           -1.0  ...       5.00          1                  1.0
29      9.0      2.0           -1.0  ...     433.82          1                  0.0
31      2.0      3.0            1.0  ...      14.93          1                  1.0
33      2.0     -1.0            1.0  ...      21.06          1                  1.0
35      3.0     -1.0           -1.0  ...       2.19          1                  1.0
37      8.0      9.0           -1.0  ...       2.33          1                  1.0
39     -1.0      3.0           -1.0  ...       0.15          1                  1.0
42      9.0      8.0            1.0  ...      90.03          1                  0.0
43      7.0      2.0           -1.0  ...       2.41          1                  1.0
44      9.0      7.0           -1.0  ...      62.63          1                  1.0
47      1.0      4.0            1.0  ...      40.26          1                  1.0
48      5.0      8.0           -1.0  ...       6.37          1                  1.0
49      7.0     -4.0            1.0  ...       0.11          1                  1.0
[37 rows x 8 columns]
Error processing market 1: only integers, slices (`:`), ellipsis (`...`), numpy.newaxis (`None`) and integer or boolean arrays are valid indices
There are 31 buy orders and 19 sell orders
#####Generating market 2 with size 50 and noise 0.015625#####
Starting computation for iteration 2
Traceback (most recent call last):
  File "/common/home/hg343/Research/accelerate_combo_option/src/combo_stock_frontier_data_preprocessor_forked.py", line 165, in <module>
    frontier_option_label_compared = synthetic_combo_frontier_generation(opt_buy_book, opt_sell_book, opt_l = args.offset, debug=0)
  File "/common/home/hg343/Research/accelerate_combo_option/src/combo_stock_frontier_data_preprocessor.py", line 75, in synthetic_combo_frontier_generation
    original_opt_buy_book = original_opt_buy_book[['option1', 'option2', 'C=Call, P=Put','Strike Price of the Option Times 1000', 'transaction_type','B/A_price']]
IndexError: only integers, slices (`:`), ellipsis (`...`), numpy.newaxis (`None`) and integer or boolean arrays are valid indices
Generating frontier for markets:  10%|█████                                              | 2/20 [08:00<1:07:27, 224.85s/it]
Generating frontier for markets:  10%|█████                                              | 2/20 [08:00<1:07:27, 224.85s/it]/common/home/hg343/Research/accelerate_combo_option/src/market.py:264: FutureWarning: The default dtype for empty Series will be 'object' instead of 'float64' in a future version. Specify a dtype explicitly to silence this warning.
  frontier_labels = pd.Series(None, index=orders.index)
checking match False -0.0
Processing order 0 (1/50)
checking match False -0.0
quote_price: 328.8515836931675, original_price: 324.42
Processing order 1 (2/50)
checking match False -0.0
quote_price: 14.577380577539559, original_price: 16.91
Processing order 2 (3/50)
checking match False -0.0
quote_price: 0.314224557022224, original_price: 0.03
Processing order 3 (4/50)
checking match False -0.0
quote_price: 11.499093511450397, original_price: 8.53
Processing order 4 (5/50)
checking match False -0.0
quote_price: -0.0, original_price: 0.68
Processing order 5 (6/50)
checking match False -0.0
quote_price: -0.0, original_price: 2.12
Processing order 6 (7/50)
checking match False -0.0
quote_price: -0.0, original_price: 0.16
Processing order 7 (8/50)
checking match False -0.0
quote_price: 3.5952433766239142, original_price: 10.04
Processing order 8 (9/50)
checking match False -0.0
quote_price: 159.96504293516423, original_price: 159.83
Processing order 9 (10/50)
checking match False -0.0
quote_price: 6.260743234503762, original_price: 14.67
Processing order 10 (11/50)
checking match False -0.0
quote_price: 220.48537726838575, original_price: 214.11
Processing order 11 (12/50)
checking match False -0.0
quote_price: 99.35887404549585, original_price: 96.46
Processing order 12 (13/50)
checking match False -0.0
quote_price: 305.51804597701164, original_price: 306.41
Processing order 13 (14/50)
checking match False -0.0
quote_price: -0.0, original_price: 0.01
Processing order 14 (15/50)
checking match False -0.0
quote_price: 1.2802225841476793, original_price: 1.62
Processing order 15 (16/50)
checking match False -0.0
quote_price: 40.7866119914165, original_price: 39.54
Processing order 16 (17/50)
checking match False -0.0
quote_price: 167.40989503816792, original_price: 165.87
Processing order 17 (18/50)
checking match False -0.0
quote_price: 79.72381044830468, original_price: 79.88
Processing order 18 (19/50)
checking match False -0.0
quote_price: 4.060032078203731, original_price: 5.23
Processing order 19 (20/50)
checking match False -0.0
quote_price: 64.32259333700873, original_price: 68.71
Processing order 20 (21/50)
checking match False -0.0
quote_price: 12.577590897352925, original_price: 13.29
Processing order 21 (22/50)
checking match False -0.0
quote_price: -0.0, original_price: 1.29
Processing order 22 (23/50)
checking match False -0.0
quote_price: -0.0, original_price: 0.18
Processing order 23 (24/50)
checking match False -0.0
quote_price: 1.9206201953051063, original_price: 2.46
Processing order 24 (25/50)
checking match False -0.0
quote_price: 87.71898808262297, original_price: 97.85
Processing order 25 (26/50)
checking match False -0.0
quote_price: 97.44835534670818, original_price: 82.79
Processing order 26 (27/50)
checking match False -0.0
quote_price: -0.0, original_price: 0.09
Processing order 27 (28/50)
checking match False -0.0
quote_price: 37.31041363002178, original_price: 47.49
Processing order 28 (29/50)
checking match False -0.0
quote_price: 91.05521757313525, original_price: 96.13
Processing order 29 (30/50)
checking match False -0.0
quote_price: 324.5355112722673, original_price: 328.89
Processing order 30 (31/50)
checking match False -0.0
quote_price: -0.0, original_price: 0.67
Processing order 31 (32/50)
checking match False -0.0
quote_price: 0.0, original_price: 9.67
Processing order 32 (33/50)
checking match False -0.0
quote_price: 0.0, original_price: 1.21
Processing order 33 (34/50)
checking match False -0.0
quote_price: 0.0, original_price: 4.92
Processing order 34 (35/50)
checking match False -0.0
quote_price: 0.0, original_price: 169.08
Processing order 35 (36/50)
checking match False -0.0
quote_price: 0.0, original_price: 2.39
Processing order 36 (37/50)
checking match False -0.0
quote_price: 0.0, original_price: 11.34
Processing order 37 (38/50)
checking match False -0.0
quote_price: 0.0, original_price: 22.49
Processing order 38 (39/50)
checking match False -0.0
quote_price: 1024.0, original_price: 175.75
Processing order 39 (40/50)
checking match False -0.0
quote_price: 1024.0, original_price: 12.21
Processing order 40 (41/50)
checking match False -0.0
quote_price: 0.0, original_price: 2.97
Processing order 41 (42/50)
checking match False -0.0
quote_price: 0.0, original_price: 0.95
Processing order 42 (43/50)
checking match False -0.0
quote_price: 0.0, original_price: 43.23
Processing order 43 (44/50)
checking match False -0.0
quote_price: 0.0, original_price: 34.63
Processing order 44 (45/50)
checking match False -0.0
quote_price: 0.0, original_price: 20.39
Processing order 45 (46/50)
checking match False -0.0
quote_price: 0.0, original_price: 2.59
Processing order 46 (47/50)
checking match False -0.0
quote_price: 0.0, original_price: 0.4
Processing order 47 (48/50)
checking match False -0.0
quote_price: 0.0, original_price: 1.59
Processing order 48 (49/50)
checking match False -0.0
quote_price: 0.0, original_price: 3.95
Processing order 49 (50/50)
checking match False -0.0
/common/home/hg343/Research/accelerate_combo_option/src/market.py:264: FutureWarning: The default dtype for empty Series will be 'object' instead of 'float64' in a future version. Specify a dtype explicitly to silence this warning.
  frontier_labels = pd.Series(None, index=orders.index)
quote_price: 0.0, original_price: 15.07
    option1  option2  C=Call, P=Put  ...  B/A_price  liquidity  belongs_to_frontier
0       8.0      1.0            1.0  ...     324.42          1                  0.0
1      -1.0      3.0            1.0  ...      16.91          1                  1.0
2       3.0      5.0           -1.0  ...       0.03          1                  0.0
3       1.0     -1.0            1.0  ...       8.53          1                  0.0
4       2.0     -1.0           -1.0  ...       0.68          1                  1.0
5       1.0      7.0           -1.0  ...       2.12          1                  1.0
6       8.0      3.0           -1.0  ...       0.16          1                  1.0
7       7.0     -4.0           -1.0  ...      10.04          1                  1.0
8       3.0      4.0            1.0  ...     159.83          1                  0.0
9       7.0      3.0           -1.0  ...      14.67          1                  1.0
10      9.0     -8.0           -1.0  ...     214.11          1                  0.0
11      6.0     -1.0            1.0  ...      96.46          1                  0.0
12      7.0      6.0            1.0  ...     306.41          1                  1.0
13      8.0     -7.0            1.0  ...       0.01          1                  1.0
14      1.0     -1.0           -1.0  ...       1.62          1                  1.0
15      1.0      1.0           -1.0  ...      39.54          1                  0.0
16      4.0      3.0            1.0  ...     165.87          1                  0.0
17      4.0      1.0            1.0  ...      79.88          1                  1.0
18      3.0      5.0            1.0  ...       5.23          1                  1.0
19      8.0      1.0           -1.0  ...      68.71          1                  1.0
20     -1.0      2.0            1.0  ...      13.29          1                  1.0
21      5.0      2.0            1.0  ...       1.29          1                  1.0
22      7.0      4.0            1.0  ...       0.18          1                  1.0
23      7.0      6.0           -1.0  ...       2.46          1                  1.0
24      5.0      9.0            1.0  ...      97.85          1                  1.0
25     -1.0      6.0           -1.0  ...      82.79          1                  0.0
26      2.0      9.0           -1.0  ...       0.09          1                  1.0
27      6.0      1.0            1.0  ...      47.49          1                  1.0
28      2.0     -3.0           -1.0  ...      96.13          1                  1.0
29      5.0      7.0            1.0  ...     328.89          1                  1.0
30      1.0      4.0            1.0  ...       0.67          1                  1.0
31      9.0      8.0           -1.0  ...       9.67          1                  1.0
32      9.0      1.0            1.0  ...       1.21          1                  1.0
33      2.0      9.0           -1.0  ...       4.92          1                  1.0
34     -1.0      5.0            1.0  ...     169.08          1                  1.0
35      1.0     -1.0           -1.0  ...       2.39          1                  1.0
36      1.0     -1.0            1.0  ...      11.34          1                  1.0
37      1.0      9.0           -1.0  ...      22.49          1                  1.0
38      3.0      7.0            1.0  ...     175.75          1                  0.0
39      9.0      8.0            1.0  ...      12.21          1                  0.0
40      3.0      4.0           -1.0  ...       2.97          1                  1.0
41      1.0      1.0           -1.0  ...       0.95          1                  1.0
42      9.0     -4.0            1.0  ...      43.23          1                  1.0
43      2.0      1.0           -1.0  ...      34.63          1                  1.0
44      3.0     -4.0           -1.0  ...      20.39          1                  1.0
45      1.0      1.0           -1.0  ...       2.59          1                  1.0
46      3.0     -2.0            1.0  ...       0.40          1                  1.0
47      1.0      2.0           -1.0  ...       1.59          1                  1.0
48      2.0     -1.0            1.0  ...       3.95          1                  1.0
49      1.0      1.0            1.0  ...      15.07          1                  1.0
[50 rows x 8 columns]
Processing order 0 (1/50)
checking match False -0.0
quote_price: 325.5538759269592, original_price: 324.42
Processing order 1 (2/50)
checking match False -0.0
quote_price: 14.514293698530897, original_price: 16.91
Processing order 2 (3/50)
checking match False -0.0
quote_price: 0.25933846731456717, original_price: 0.03
Processing order 3 (4/50)
checking match False -0.0
quote_price: 11.499093511450369, original_price: 8.53
Processing order 4 (5/50)
checking match False -0.0
quote_price: -0.0, original_price: 0.68
Processing order 5 (6/50)
checking match False -0.0
quote_price: -0.0, original_price: 2.12
Processing order 6 (7/50)
checking match False -0.0
quote_price: -0.0, original_price: 0.16
Processing order 7 (8/50)
checking match False -0.0
quote_price: 1.4326722377716368, original_price: 10.04
Processing order 8 (9/50)
checking match False -0.0
quote_price: 159.96504504423126, original_price: 159.83
Processing order 9 (10/50)
checking match False -0.0
quote_price: 4.030292939248312, original_price: 14.67
Processing order 10 (11/50)
checking match False -0.0
quote_price: 192.72427097047995, original_price: 214.11
Processing order 11 (12/50)
checking match False -0.0
quote_price: 99.35887404580028, original_price: 96.46
Processing order 12 (13/50)
checking match False -0.0
quote_price: 305.2196837023873, original_price: 306.41
Processing order 13 (14/50)
checking match False -0.0
quote_price: -0.0, original_price: 0.01
Processing order 14 (15/50)
checking match False -0.0
quote_price: 1.2802225841476602, original_price: 1.62
Processing order 15 (16/50)
checking match False -0.0
quote_price: 40.786611991414496, original_price: 39.54
Processing order 16 (17/50)
checking match False -0.0
quote_price: 167.40989503816826, original_price: 165.87
Processing order 17 (18/50)
checking match False -0.0
quote_price: 79.7238104483036, original_price: 79.88
Processing order 18 (19/50)
checking match False -0.0
quote_price: 4.060032078203769, original_price: 5.23
Processing order 19 (20/50)
checking match False -0.0
quote_price: 59.76838187598603, original_price: 68.71
Processing order 20 (21/50)
checking match False -0.0
quote_price: 12.351823711311086, original_price: 13.29
Processing order 21 (22/50)
checking match False -0.0
quote_price: -0.0, original_price: 1.29
Processing order 22 (23/50)
checking match False -0.0
quote_price: -0.0, original_price: 0.18
Processing order 23 (24/50)
checking match False -0.0
quote_price: 0.7051889878350588, original_price: 2.46
Processing order 24 (25/50)
checking match False -0.0
quote_price: 79.23495828810951, original_price: 97.85
Processing order 25 (26/50)
checking match False -0.0
quote_price: 90.9712441097331, original_price: 82.79
Processing order 26 (27/50)
checking match False -0.0
quote_price: -0.0, original_price: 0.09
Processing order 27 (28/50)
checking match False -0.0
quote_price: 37.2818285013936, original_price: 47.49
Processing order 28 (29/50)
checking match False -0.0
quote_price: 91.05466787574785, original_price: 96.13
Processing order 29 (30/50)
checking match False -0.0
quote_price: 324.40911627953164, original_price: 328.89
Processing order 30 (31/50)
checking match False -0.0
quote_price: -0.0, original_price: 0.67
Processing order 31 (32/50)
checking match False -0.0
quote_price: 0.0, original_price: 9.67
Processing order 32 (33/50)
checking match False -0.0
quote_price: 0.0, original_price: 1.21
Processing order 33 (34/50)
checking match False -0.0
quote_price: 0.0, original_price: 4.92
Processing order 34 (35/50)
checking match False -0.0
quote_price: 0.0, original_price: 169.08
Processing order 35 (36/50)
checking match False -0.0
quote_price: 0.0, original_price: 2.39
Processing order 36 (37/50)
checking match False -0.0
quote_price: 0.0, original_price: 11.34
Processing order 37 (38/50)
checking match False -0.0
quote_price: 0.0, original_price: 22.49
Processing order 38 (39/50)
checking match False -0.0
quote_price: 0.0, original_price: 175.75
Processing order 39 (40/50)
checking match False -0.0
quote_price: 0.0, original_price: 12.21
Processing order 40 (41/50)
checking match False -0.0
quote_price: 0.0, original_price: 2.97
Processing order 41 (42/50)
checking match False -0.0
quote_price: 0.0, original_price: 0.95
Processing order 42 (43/50)
checking match False -0.0
quote_price: 0.0, original_price: 43.23
Processing order 43 (44/50)
checking match False -0.0
quote_price: 0.0, original_price: 34.63
Processing order 44 (45/50)
checking match False -0.0
quote_price: 0.0, original_price: 20.39
Processing order 45 (46/50)
checking match False -0.0
quote_price: 0.0, original_price: 2.59
Processing order 46 (47/50)
checking match False -0.0
quote_price: 0.0, original_price: 0.4
Processing order 47 (48/50)
checking match False -0.0
quote_price: 0.0, original_price: 1.59
Processing order 48 (49/50)
checking match False -0.0
quote_price: 0.0, original_price: 3.95
Processing order 49 (50/50)
checking match False -0.0
Traceback (most recent call last):
  File "/common/home/hg343/Research/accelerate_combo_option/src/combo_stock_frontier_data_preprocessor_forked.py", line 165, in <module>
    frontier_option_label_compared = synthetic_combo_frontier_generation(opt_buy_book, opt_sell_book, opt_l = args.offset, debug=0)
  File "/common/home/hg343/Research/accelerate_combo_option/src/combo_stock_frontier_data_preprocessor.py", line 75, in synthetic_combo_frontier_generation
    original_opt_buy_book = original_opt_buy_book[['option1', 'option2', 'C=Call, P=Put','Strike Price of the Option Times 1000', 'transaction_type','B/A_price']]
IndexError: only integers, slices (`:`), ellipsis (`...`), numpy.newaxis (`None`) and integer or boolean arrays are valid indices
Generating frontier for markets:  15%|███████▋                                           | 3/20 [12:34<1:10:01, 247.12s/it]
quote_price: 0.0, original_price: 15.07
    option1  option2  C=Call, P=Put  ...  B/A_price  liquidity  belongs_to_frontier
0       8.0      1.0            1.0  ...     324.42          1                  0.0
1      -1.0      3.0            1.0  ...      16.91          1                  1.0
2       3.0      5.0           -1.0  ...       0.03          1                  0.0
3       1.0     -1.0            1.0  ...       8.53          1                  0.0
4       2.0     -1.0           -1.0  ...       0.68          1                  1.0
5       1.0      7.0           -1.0  ...       2.12          1                  1.0
6       8.0      3.0           -1.0  ...       0.16          1                  1.0
7       7.0     -4.0           -1.0  ...      10.04          1                  1.0
8       3.0      4.0            1.0  ...     159.83          1                  0.0
9       7.0      3.0           -1.0  ...      14.67          1                  1.0
10      9.0     -8.0           -1.0  ...     214.11          1                  1.0
11      6.0     -1.0            1.0  ...      96.46          1                  0.0
12      7.0      6.0            1.0  ...     306.41          1                  1.0
13      8.0     -7.0            1.0  ...       0.01          1                  1.0
14      1.0     -1.0           -1.0  ...       1.62          1                  1.0
15      1.0      1.0           -1.0  ...      39.54          1                  0.0
16      4.0      3.0            1.0  ...     165.87          1                  0.0
17      4.0      1.0            1.0  ...      79.88          1                  1.0
18      3.0      5.0            1.0  ...       5.23          1                  1.0
19      8.0      1.0           -1.0  ...      68.71          1                  1.0
20     -1.0      2.0            1.0  ...      13.29          1                  1.0
21      5.0      2.0            1.0  ...       1.29          1                  1.0
22      7.0      4.0            1.0  ...       0.18          1                  1.0
23      7.0      6.0           -1.0  ...       2.46          1                  1.0
24      5.0      9.0            1.0  ...      97.85          1                  1.0
25     -1.0      6.0           -1.0  ...      82.79          1                  0.0
26      2.0      9.0           -1.0  ...       0.09          1                  1.0
27      6.0      1.0            1.0  ...      47.49          1                  1.0
28      2.0     -3.0           -1.0  ...      96.13          1                  1.0
29      5.0      7.0            1.0  ...     328.89          1                  1.0
30      1.0      4.0            1.0  ...       0.67          1                  1.0
31      9.0      8.0           -1.0  ...       9.67          1                  1.0
32      9.0      1.0            1.0  ...       1.21          1                  1.0
33      2.0      9.0           -1.0  ...       4.92          1                  1.0
34     -1.0      5.0            1.0  ...     169.08          1                  1.0
35      1.0     -1.0           -1.0  ...       2.39          1                  1.0
36      1.0     -1.0            1.0  ...      11.34          1                  1.0
37      1.0      9.0           -1.0  ...      22.49          1                  1.0
38      3.0      7.0            1.0  ...     175.75          1                  1.0
39      9.0      8.0            1.0  ...      12.21          1                  1.0
40      3.0      4.0           -1.0  ...       2.97          1                  1.0
41      1.0      1.0           -1.0  ...       0.95          1                  1.0
42      9.0     -4.0            1.0  ...      43.23          1                  1.0
43      2.0      1.0           -1.0  ...      34.63          1                  1.0
44      3.0     -4.0           -1.0  ...      20.39          1                  1.0
45      1.0      1.0           -1.0  ...       2.59          1                  1.0
46      3.0     -2.0            1.0  ...       0.40          1                  1.0
47      1.0      2.0           -1.0  ...       1.59          1                  1.0
48      2.0     -1.0            1.0  ...       3.95          1                  1.0
49      1.0      1.0            1.0  ...      15.07          1                  1.0
[50 rows x 8 columns]
Error processing market 2: only integers, slices (`:`), ellipsis (`...`), numpy.newaxis (`None`) and integer or boolean arrays are valid indices
There are 31 buy orders and 19 sell orders
#####Generating market 3 with size 50 and noise 0.015625#####
Starting computation for iteration 3
Generating frontier for markets:  15%|███████▋                                           | 3/20 [12:34<1:10:01, 247.12s/it]/common/home/hg343/Research/accelerate_combo_option/src/market.py:264: FutureWarning: The default dtype for empty Series will be 'object' instead of 'float64' in a future version. Specify a dtype explicitly to silence this warning.
  frontier_labels = pd.Series(None, index=orders.index)
checking match True 1.6183553688781558
The market is matched, cant get epsilon frontiers
Processing order 0 (1/50)
checking match False -0.0
quote_price: 54.88792750230686, original_price: 54.01
Processing order 1 (2/50)
checking match False -0.0
quote_price: 62.263267160638584, original_price: 48.03
Processing order 2 (3/50)
checking match False -0.0
quote_price: 3.275557488971217, original_price: 1.18
Processing order 3 (4/50)
checking match False -0.0
quote_price: 232.37230742712737, original_price: 235.64
Processing order 4 (5/50)
checking match False -0.0
quote_price: -0.0, original_price: 1.46
Processing order 5 (6/50)
checking match False -0.0
quote_price: 242.0336944882, original_price: 237.01
Processing order 6 (7/50)
checking match False -0.0
quote_price: 0.8223891967020549, original_price: 0.08
Processing order 7 (8/50)
checking match False -0.0
quote_price: 144.80657493939555, original_price: 144.31
Processing order 8 (9/50)
checking match False -0.0
quote_price: 213.1104109107306, original_price: 217.28
Processing order 9 (10/50)
checking match False -0.0
quote_price: 45.03339614252517, original_price: 53.38
Processing order 10 (11/50)
checking match False -0.0
quote_price: 60.81784974093264, original_price: 61.26
Processing order 11 (12/50)
checking match False -0.0
quote_price: -0.0, original_price: 0.14
Processing order 12 (13/50)
checking match False -0.0
quote_price: 0.49457746638664746, original_price: 0.22
Processing order 13 (14/50)
checking match False -0.0
quote_price: 0.04255871535209438, original_price: 3.99
Processing order 14 (15/50)
checking match False -0.0
quote_price: 0.5896476481636981, original_price: 0.17
Processing order 15 (16/50)
checking match False -0.0
quote_price: 102.75122959315601, original_price: 104.26
Processing order 16 (17/50)
checking match False -0.0
quote_price: 47.19148873072105, original_price: 47.59
Processing order 17 (18/50)
checking match False -0.0
quote_price: 260.8532137706769, original_price: 260.8
Processing order 18 (19/50)
checking match False -0.0
quote_price: 105.17350612959721, original_price: 106.62
Processing order 19 (20/50)
checking match False -0.0
quote_price: 91.82337249951273, original_price: 90.32
Processing order 20 (21/50)
checking match False -0.0
quote_price: 160.37632033261508, original_price: 157.91
Processing order 21 (22/50)
checking match False -0.0
quote_price: 3.2901681351544068, original_price: 1.09
Processing order 22 (23/50)
checking match False -0.0
quote_price: 163.77900948990072, original_price: 164.07
Processing order 23 (24/50)
checking match False -0.0
quote_price: 11.34982491781938, original_price: 12.52
Processing order 24 (25/50)
checking match False -0.0
quote_price: 0.1321904779374492, original_price: 0.11
Processing order 25 (26/50)
checking match False -0.0
quote_price: 14.025362428086483, original_price: 22.98
Processing order 26 (27/50)
checking match False -0.0
quote_price: 20.574389822017135, original_price: 19.29
Processing order 27 (28/50)
checking match False -0.0
quote_price: -0.0, original_price: 5.91
Processing order 28 (29/50)
checking match False -0.0
quote_price: 21.458741779338222, original_price: 21.5
Processing order 29 (30/50)
checking match False -0.0
quote_price: 44.018523274478206, original_price: 44.26
Processing order 30 (31/50)
checking match False -0.0
quote_price: 113.2672044346827, original_price: 111.86
Processing order 31 (32/50)
checking match False -0.0
quote_price: 5.771715547107031e+17, original_price: 177.69
Processing order 32 (33/50)
checking match False -0.0
quote_price: 0.0, original_price: 0.05
Processing order 33 (34/50)
checking match False -0.0
quote_price: 0.0, original_price: 93.86
Processing order 34 (35/50)
checking match False -0.0
quote_price: 0.0, original_price: 12.42
Processing order 35 (36/50)
checking match False -0.0
quote_price: 0.0, original_price: 31.69
Processing order 36 (37/50)
checking match False -0.0
quote_price: 0.0, original_price: 23.88
Processing order 37 (38/50)
checking match False -0.0
quote_price: 0.0, original_price: 58.24
Processing order 38 (39/50)
checking match False -0.0
quote_price: 0.0, original_price: 83.54
Processing order 39 (40/50)
checking match False -0.0
quote_price: 0.0, original_price: 2.37
Processing order 40 (41/50)
checking match False -0.0
quote_price: 0.0, original_price: 47.7
Processing order 41 (42/50)
checking match False -0.0
quote_price: 0.0, original_price: 1.42
Processing order 42 (43/50)
checking match False -0.0
quote_price: 0.0, original_price: 43.74
Processing order 43 (44/50)
checking match False -0.0
quote_price: 0.0, original_price: 61.48
Processing order 44 (45/50)
checking match False -0.0
quote_price: 0.0, original_price: 11.15
Processing order 45 (46/50)
checking match False -0.0
Mechanism solver timed out after 30 seconds
Timeout in mechanism solver for sell order quote
Timeout in price quote for order 45
Processing order 46 (47/50)
checking match False -0.0
quote_price: 0.0, original_price: 24.91
Processing order 47 (48/50)
checking match False -0.0
quote_price: 0.0, original_price: 0.05
Processing order 48 (49/50)
checking match False -0.0
quote_price: 0.0, original_price: 3.32
Processing order 49 (50/50)
checking match False -0.0
Traceback (most recent call last):
  File "/common/home/hg343/Research/accelerate_combo_option/src/combo_stock_frontier_data_preprocessor_forked.py", line 165, in <module>
    frontier_option_label_compared = synthetic_combo_frontier_generation(opt_buy_book, opt_sell_book, opt_l = args.offset, debug=0)
  File "/common/home/hg343/Research/accelerate_combo_option/src/combo_stock_frontier_data_preprocessor.py", line 75, in synthetic_combo_frontier_generation
    original_opt_buy_book = original_opt_buy_book[['option1', 'option2', 'C=Call, P=Put','Strike Price of the Option Times 1000', 'transaction_type','B/A_price']]
IndexError: only integers, slices (`:`), ellipsis (`...`), numpy.newaxis (`None`) and integer or boolean arrays are valid indices
Generating frontier for markets:  20%|██████████▏                                        | 4/20 [17:30<1:11:01, 266.36s/it]
quote_price: 0.0, original_price: 92.73
    option1  option2  C=Call, P=Put  ...  B/A_price  liquidity  belongs_to_frontier
0       1.0     -1.0           -1.0  ...      54.01          1                  0.0
1       5.0      7.0           -1.0  ...      48.03          1                  0.0
2       3.0      2.0           -1.0  ...       1.18          1                  0.0
3      -4.0      9.0            1.0  ...     235.64          1                  1.0
4       5.0     -3.0           -1.0  ...       1.46          1                  1.0
5       4.0     -3.0            1.0  ...     237.01          1                  0.0
6       8.0      9.0           -1.0  ...       0.08          1                  0.0
7       2.0     -1.0           -1.0  ...     144.31          1                  0.0
8       5.0      2.0            1.0  ...     217.28          1                  1.0
9       7.0      3.0            1.0  ...      53.38          1                  1.0
10     -1.0      4.0            1.0  ...      61.26          1                  1.0
11      6.0      5.0            1.0  ...       0.14          1                  1.0
12      4.0      3.0           -1.0  ...       0.22          1                  0.0
13      3.0     -1.0            1.0  ...       3.99          1                  1.0
14      5.0     -4.0            1.0  ...       0.17          1                  0.0
15      2.0      1.0            1.0  ...     104.26          1                  1.0
16      1.0      2.0            1.0  ...      47.59          1                  1.0
17      5.0     -3.0           -1.0  ...     260.80          1                  0.0
18     -2.0      5.0            1.0  ...     106.62          1                  1.0
19      6.0     -7.0           -1.0  ...      90.32          1                  0.0
20      4.0     -3.0           -1.0  ...     157.91          1                  0.0
21      1.0      1.0           -1.0  ...       1.09          1                  0.0
22      3.0     -1.0           -1.0  ...     164.07          1                  1.0
23      5.0     -1.0           -1.0  ...      12.52          1                  1.0
24      9.0      8.0           -1.0  ...       0.11          1                  0.0
25      9.0     -2.0           -1.0  ...      22.98          1                  1.0
26     -1.0      2.0            1.0  ...      19.29          1                  0.0
27      4.0     -1.0           -1.0  ...       5.91          1                  1.0
28      1.0      1.0            1.0  ...      21.50          1                  1.0
29      1.0      2.0            1.0  ...      44.26          1                  1.0
30      3.0     -2.0           -1.0  ...     111.86          1                  0.0
31      5.0      7.0           -1.0  ...     177.69          1                  0.0
32      4.0     -1.0            1.0  ...       0.05          1                  1.0
33      1.0      3.0            1.0  ...      93.86          1                  1.0
34     -7.0      9.0            1.0  ...      12.42          1                  1.0
35      1.0      1.0           -1.0  ...      31.69          1                  1.0
36     -1.0      2.0            1.0  ...      23.88          1                  1.0
37     -2.0      5.0            1.0  ...      58.24          1                  1.0
38     -1.0      3.0            1.0  ...      83.54          1                  1.0
39     -1.0      2.0           -1.0  ...       2.37          1                  1.0
40     -2.0      5.0            1.0  ...      47.70          1                  1.0
41      1.0     -1.0            1.0  ...       1.42          1                  1.0
42      9.0      7.0           -1.0  ...      43.74          1                  1.0
43      2.0      1.0            1.0  ...      61.48          1                  1.0
44     -1.0      2.0            1.0  ...      11.15          1                  1.0
45      4.0     -1.0           -1.0  ...      13.79          1                  NaN
46      2.0     -1.0            1.0  ...      24.91          1                  1.0
47      3.0     -1.0            1.0  ...       0.05          1                  1.0
48      8.0      5.0           -1.0  ...       3.32          1                  1.0
49      3.0      5.0            1.0  ...      92.73          1                  1.0
[50 rows x 8 columns]
Error processing market 3: only integers, slices (`:`), ellipsis (`...`), numpy.newaxis (`None`) and integer or boolean arrays are valid indices
There are 32 buy orders and 18 sell orders
#####Generating market 4 with size 50 and noise 0.015625#####
Starting computation for iteration 4
Generating frontier for markets:  20%|██████████▏                                        | 4/20 [17:30<1:11:01, 266.36s/it]/common/home/hg343/Research/accelerate_combo_option/src/market.py:264: FutureWarning: The default dtype for empty Series will be 'object' instead of 'float64' in a future version. Specify a dtype explicitly to silence this warning.
  frontier_labels = pd.Series(None, index=orders.index)
checking match False -0.0
Processing order 0 (1/43)
checking match False -0.0
quote_price: 48.45583177939751, original_price: 49.0
Processing order 1 (2/43)
checking match False -0.0
quote_price: -0.0, original_price: 0.03
Processing order 2 (3/43)
checking match False -0.0
quote_price: 34.657116513001085, original_price: 36.71
Processing order 5 (4/43)
checking match False -0.0
quote_price: 137.32183035652264, original_price: 140.28
Processing order 6 (5/43)
checking match False -0.0
quote_price: -0.0, original_price: 0.02
Processing order 7 (6/43)
checking match False -0.0
quote_price: -0.0, original_price: 0.01
Processing order 8 (7/43)
checking match False -0.0
quote_price: 0.003640459562964631, original_price: 0.21
Processing order 9 (8/43)
checking match False -0.0
quote_price: 6.57603536474513, original_price: 7.58
Processing order 10 (9/43)
checking match False -0.0
quote_price: 17.725028122878303, original_price: 19.7
Processing order 11 (10/43)
checking match False -0.0
quote_price: 1.3496813725490355, original_price: 9.64
Processing order 12 (11/43)
checking match False -0.0
quote_price: -0.0, original_price: 2.25
Processing order 13 (12/43)
checking match False -0.0
quote_price: 115.708199330362, original_price: 117.57
Processing order 14 (13/43)
checking match False -0.0
quote_price: 0.009904628983484532, original_price: 0.02
Processing order 15 (14/43)
checking match False -0.0
quote_price: 10.501302015269637, original_price: 17.99
Processing order 16 (15/43)
checking match False -0.0
quote_price: 0.1460900296934154, original_price: 0.46
Processing order 17 (16/43)
checking match False -0.0
quote_price: 67.0905509238969, original_price: 67.78
Processing order 18 (17/43)
checking match False -0.0
quote_price: 84.3236708860759, original_price: 86.48
Processing order 19 (18/43)
checking match False -0.0
quote_price: 32.652754610664616, original_price: 34.12
Processing order 20 (19/43)
checking match False -0.0
quote_price: 153.91921481481472, original_price: 171.44
Processing order 21 (20/43)
checking match False -0.0
quote_price: 134.9092572463767, original_price: 137.51
Processing order 22 (21/43)
