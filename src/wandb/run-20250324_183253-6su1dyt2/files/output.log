
Generating frontier for markets:   0%|                                                                | 0/20 [00:00<?, ?it/s]
There are 25 buy orders and 25 sell orders
#####Generating market 0 with size 50 and noise 0.015625#####
Starting computation for iteration 0
Generating frontier for markets:   0%|                                                                | 0/20 [00:00<?, ?it/s]/common/home/hg343/Research/accelerate_combo_option/src/market.py:264: FutureWarning: The default dtype for empty Series will be 'object' instead of 'float64' in a future version. Specify a dtype explicitly to silence this warning.
  frontier_labels = pd.Series(None, index=orders.index)
checking match False -0.0
Processing order 0 (1/37)
checking match False -0.0
quote_price: 69.50942087657864, original_price: 68.04
Processing order 1 (2/37)
checking match False -0.0
quote_price: 62.48707286113185, original_price: 63.33
Processing order 3 (3/37)
checking match False -0.0
quote_price: 34.511693024402106, original_price: 36.19
Processing order 4 (4/37)
checking match False -0.0
quote_price: 154.9203211239339, original_price: 156.18
Processing order 5 (5/37)
checking match False -0.0
quote_price: 182.322830549896, original_price: 186.12
Processing order 6 (6/37)
checking match False -0.0
quote_price: 18.90034230810692, original_price: 19.82
Processing order 7 (7/37)
checking match False -0.0
quote_price: 180.87296302568814, original_price: 182.73
Processing order 8 (8/37)
checking match False -0.0
quote_price: 105.08140564471498, original_price: 107.05
Processing order 9 (9/37)
checking match False -0.0
quote_price: -0.0, original_price: 0.52
Processing order 10 (10/37)
checking match False -0.0
quote_price: 15.201653626839953, original_price: 22.92
Processing order 11 (11/37)
checking match False -0.0
quote_price: 104.6923329186927, original_price: 106.16
Processing order 12 (12/37)
checking match False -0.0
quote_price: 51.57869766513667, original_price: 53.02
Processing order 13 (13/37)
checking match False -0.0
quote_price: -0.0, original_price: 2.35
Processing order 14 (14/37)
checking match False -0.0
Mechanism solver timed out after 10 seconds
Timeout in mechanism solver for buy order quote
Timeout in price quote for order 14
Processing order 16 (15/37)
checking match False -0.0
quote_price: -0.0, original_price: 0.02
Processing order 17 (16/37)
checking match False -0.0
quote_price: 222.8740224606763, original_price: 226.09
Processing order 18 (17/37)
checking match False -0.0
quote_price: 55.9843771268775, original_price: 57.9
Processing order 19 (18/37)
checking match False -0.0
quote_price: 169.4620698518357, original_price: 169.38
Processing order 20 (19/37)
checking match False -0.0
quote_price: 32.276528696461384, original_price: 28.41
Processing order 21 (20/37)
checking match False -0.0
quote_price: 77.16105947573753, original_price: 73.64
Processing order 22 (21/37)
checking match False -0.0
quote_price: 155.80588433464325, original_price: 156.52
Processing order 23 (22/37)
checking match False -0.0
quote_price: 89.38759856041953, original_price: 90.72
Processing order 24 (23/37)
checking match False -0.0
quote_price: -0.0, original_price: 0.3
Processing order 25 (24/37)
checking match False -0.0
quote_price: 0.0, original_price: 53.73
Processing order 26 (25/37)
checking match False -0.0
quote_price: 0.0, original_price: 149.36
Processing order 27 (26/37)
checking match False -0.0
quote_price: 0.0, original_price: 11.82
Processing order 28 (27/37)
checking match False -0.0
quote_price: 0.0, original_price: 1.03
Processing order 31 (28/37)
checking match False -0.0
quote_price: 0.0, original_price: 174.67
Processing order 32 (29/37)
checking match False -0.0
quote_price: 0.0, original_price: 176.88
Processing order 36 (30/37)
checking match False -0.0
quote_price: 0.0, original_price: 30.24
Processing order 38 (31/37)
checking match False -0.0
quote_price: 0.0, original_price: 10.59
Processing order 39 (32/37)
checking match False -0.0
Mechanism solver timed out after 10 seconds
Timeout in mechanism solver for sell order quote
Timeout in price quote for order 39
Processing order 41 (33/37)
checking match False -0.0
quote_price: 0.0, original_price: 1.24
Processing order 42 (34/37)
checking match False -0.0
quote_price: 0.0, original_price: 13.98
Processing order 43 (35/37)
checking match False -0.0
quote_price: 0.0, original_price: 26.91
Processing order 46 (36/37)
checking match False -0.0
quote_price: 0.0, original_price: 69.58
Processing order 48 (37/37)
checking match False -0.0
quote_price: 0.0, original_price: 9.87
    option1  option2  C=Call, P=Put  ...  B/A_price  liquidity  belongs_to_frontier
0      -3.0      5.0           -1.0  ...      68.04          1                  0.0
1       1.0      3.0            1.0  ...      63.33          1                  1.0
3       2.0     -1.0           -1.0  ...      36.19          1                  1.0
4      -2.0      9.0            1.0  ...     156.18          1                  1.0
5       1.0      7.0            1.0  ...     186.12          1                  1.0
6       2.0     -1.0           -1.0  ...      19.82          1                  1.0
7       6.0      5.0            1.0  ...     182.73          1                  1.0
8       3.0      1.0            1.0  ...     107.05          1                  1.0
9       1.0      1.0            1.0  ...       0.52          1                  1.0
10      4.0      1.0           -1.0  ...      22.92          1                  1.0
11      3.0      2.0            1.0  ...     106.16          1                  1.0
12      3.0      1.0           -1.0  ...      53.02          1                  1.0
13      2.0     -1.0           -1.0  ...       2.35          1                  1.0
14      1.0     -2.0           -1.0  ...      65.73          1                  NaN
16      2.0      1.0           -1.0  ...       0.02          1                  1.0
17      7.0      5.0           -1.0  ...     226.09          1                  1.0
18      1.0      1.0           -1.0  ...      57.90          1                  1.0
19     -2.0      7.0            1.0  ...     169.38          1                  0.0
20     -5.0      7.0           -1.0  ...      28.41          1                  0.0
21      1.0      6.0           -1.0  ...      73.64          1                  0.0
22      4.0      9.0            1.0  ...     156.52          1                  1.0
23      5.0     -3.0            1.0  ...      90.72          1                  1.0
24      8.0      5.0           -1.0  ...       0.30          1                  1.0
25      2.0     -3.0           -1.0  ...      53.73          1                  1.0
26      3.0      2.0           -1.0  ...     149.36          1                  1.0
27      8.0     -7.0            1.0  ...      11.82          1                  1.0
28      1.0     -1.0            1.0  ...       1.03          1                  1.0
31      8.0     -5.0            1.0  ...     174.67          1                  1.0
32      3.0      8.0           -1.0  ...     176.88          1                  1.0
36     -4.0      7.0            1.0  ...      30.24          1                  1.0
38      6.0      1.0           -1.0  ...      10.59          1                  1.0
39      5.0     -1.0            1.0  ...       4.05          1                  NaN
41      2.0      1.0           -1.0  ...       1.24          1                  1.0
42      6.0      5.0            1.0  ...      13.98          1                  1.0
43      2.0      1.0           -1.0  ...      26.91          1                  1.0
46      4.0      7.0            1.0  ...      69.58          1                  1.0
48      8.0     -3.0           -1.0  ...       9.87          1                  1.0
[37 rows x 8 columns]
Successfully completed iteration 0
Saving to: /common/home/hg343/Research/accelerate_combo_option/data/combo_2_test/corrected_testing_combo_frontier_market_index_0_book_size_50_AAPL_MSFT_NOISE_0.015625.pkl
Successfully saved iteration 0
> /common/home/hg343/Research/accelerate_combo_option/src/combo_stock_frontier_data_preprocessor_forked.py(145)<module>()
-> for market_index in tqdm(range(0, num_books), desc=f'Generating frontier for markets'):
140  	                                'book_size': BOOK_SIZE,
141  	                                'total_markets': num_books
142  	                            }
143  	                        )
144  	
145  ->	                        for market_index in tqdm(range(0, num_books), desc=f'Generating frontier for markets'):
146  	                            try:
147  	                                stock_name = '_'.join(stock_list)
148  	                                opt_book_1 = opt_book[market_index*MARKET_SIZE:(market_index+1)*MARKET_SIZE]
149  	                                opt_buy_book, opt_sell_book = add_noise_orderbook(opt_book_1, NOISE)
150  	
  1  	import pdb
  2  	import pickle
  3  	import argparse
  4  	import pandas as pd
  5  	import numpy as np
  6  	import random
  7  	import math
  8  	import os.path
  9  	from combinatorial.gen_synthetic_combo_options import gen_synthetic_combo_options
 10  	from combinatorial.synthetic_combo_mip_match import synthetic_combo_match_mip
 11  	from mechanism_solver import mechanism_solver_combo
 12  	from gurobipy import *
 13  	import timeit
 14  	from copy import deepcopy
 15  	from tqdm import tqdm
 16  	# Run in a separate process with timeout
 17  	from multiprocessing import Process, Queue, Pool
 18  	import multiprocessing as mp
 19  	import queue
 20  	import traceback
 21  	from contextlib import contextmanager
 22  	import signal
 23  	import sys
 24  	from multiprocessing import Pool, TimeoutError
 25  	import itertools
 26  	import wandb
 27  	import os
 28  	from market import Market
 29  	
 30  	# Add this function to parse command line arguments
 31  	def parse_arguments():
 32  	    parser = argparse.ArgumentParser(description='Process stock options.')
 33  	    parser.add_argument('--num_stocks', type=int, default=2, help='Number of stocks to process (default: 3)')
 34  	    parser.add_argument('--market_size', type=int, default=50, help='Number of orders in the market')
 35  	    parser.add_argument('--offset', type=bool, default=False, help='Whether to allow offset for liability in the optimization')
 36  	    parser.add_argument('--wandb_project', type=str, default='expediating_comb_financial_market_matching', help='Wandb project name')
 37  	    parser.add_argument('--num_orders', type=int, default=5000, help='number of orders in the orderbook')
 38  	    parser.add_argument('--noise', type=float, default=2**-6, help='noise level in the orderbook')
 39  	    return parser.parse_args()
 40  	
 41  	# Move the main execution code inside if __name__ == '__main__':
 42  	args = parse_arguments()
 43  	
 44  	
 45  	
 46  	# Set wandb API key programmatically
 47  	os.environ["WANDB_API_KEY"] = "d1cb0d609d7b64218fe82a45a54e57f47e2d26da"
 48  	
 49  	try:
 50  	    wandb.login()  # This will now use the API key we just set
 51  	except wandb.errors.AuthError:
 52  	    print("Could not authenticate with wandb. Invalid API key")
 53  	    sys.exit(1)
 54  	
 55  	def signal_handler(signum, frame):
 56  	    print("Ctrl+C received. Terminating processes...")
 57  	    if 'pool' in globals():
 58  	        pool.terminate()
 59  	        pool.join()
 60  	    sys.exit(1)
 61  	
 62  	# Register the signal handler
 63  	signal.signal(signal.SIGINT, signal_handler)
 64  	
 65  	
 66  	
 67  	
 68  	
 69  	
 70  	def add_noise_orderbook(opt_book, NOISE=0.01):
 71  	    SEED = 1
 72  	    random.seed(SEED)
 73  	    # coeff up to len(stock_list); call/put; strike; buy/sell; price (bid/ask)
 74  	    opt_buy_book, opt_sell_book = opt_book[opt_book[:, -2]==1], opt_book[opt_book[:, -2]==0]
 75  	    num_buy, num_sell = len(opt_buy_book), len(opt_sell_book)
 76  	    # add noise
 77  	    buy_noise = [random.random()*NOISE+1 for i in range(num_buy)]
 78  	    opt_buy_book[:, -1] = np.round(buy_noise * opt_buy_book[:, -1], 2)
 79  	    sell_noise = [1-random.random()*NOISE for i in range(num_sell)]
 80  	    opt_sell_book[:, -1] = np.round(sell_noise * opt_sell_book[:, -1], 2)
 81  	    print('There are {} buy orders and {} sell orders'.format(num_buy, num_sell))
 82  	    return opt_buy_book, opt_sell_book
 83  	
 84  	
 85  	
 86  	@contextmanager
 87  	def pool_context(processes=None):
 88  	    pool = mp.Pool(processes=processes)
 89  	    try:
 90  	        yield pool
 91  	    finally:
 92  	        pool.terminate()
 93  	        pool.join()
 94  	
 95  	# Parameter lists
 96  	# NUM_STOCK_LIST = [2] #, 4, 8, 12, 16, 20]  # 12, 16, 20
 97  	# BOOK_SIZE_LIST = [50] #,150, 200, 250, 300, 350, 400]
 98  	# NOISE_LIST = [2**-6]#[2**-7, 2**-6, 2**-5, 2**-4, 2**-3]
 99  	
100  	
101  	
102  	if __name__ == '__main__':
103  	    NUM_STOCK = args.num_stocks
104  	    MARKET_SIZE = args.market_size
105  	    NOISE = args.noise
106  	    BOOK_SIZE = args.market_size
107  	
108  	    tasks = {}
109  	    directory_path = f'/common/home/hg343/Research/accelerate_combo_option/data/combo_2_test'
110  	
111  	    try:
112  	        with wandb.init(
113  	            project=args.wandb_project,
114  	            name=f"combo_frontier_num_stock_{NUM_STOCK}_noise_{NOISE}_market_size_{MARKET_SIZE}",
115  	        ) as run:
116  	            selection = ['AAPL', 'AXP', 'BA', 'DIS', 'GS', 'HD', 'IBM', 'JNJ', 'JPM', 'KO', 'MCD', 'MMM', 'MSFT', 'NKE', 'PG', 'RTX', 'VZ', 'WBA', 'WMT', 'XOM']
117  	            stock_list = ['AAPL', 'MSFT']
118  	            combinations_string = '_'.join(stock_list)
119  	
120  	            with pool_context(processes=20) as pool:
121  	                for i in range(2, 14):
122  	                    try:
123  	                        filename = f'combinatorial/book/STOCK_2_SEED_{i}_book_{combinations_string}.npy'
124  	                        if os.path.isfile(filename):
125  	                            opt_book = np.load(filename)
126  	                        else:
127  	                            print('File not found')
128  	                            opt_book, stock_list = gen_synthetic_combo_options(NUM_ST=NUM_STOCK, NUM_ORDER=args.num_orders, combinations=stock_list, SEED=i)
129  	                            np.save(filename, opt_book)
130  	
131  	                        num_books = len(opt_book)//50
132  	                        artifact = wandb.Artifact(
133  	                            name=f"combo_frontier_{'_'.join(stock_list)}_size_{BOOK_SIZE}_noise_{NOISE}",
134  	                            type="dataset",
135  	                            description="Collection of frontier options training data for different markets",
136  	                            metadata={
137  	                                'num_stock': NUM_STOCK,
138  	                                'stock_name': '_'.join(stock_list),
139  	                                'noise': NOISE,
140  	                                'book_size': BOOK_SIZE,
141  	                                'total_markets': num_books
142  	                            }
143  	                        )
144  	
145  ->	                        for market_index in tqdm(range(0, num_books), desc=f'Generating frontier for markets'):
146  	                            try:
147  	                                stock_name = '_'.join(stock_list)
148  	                                opt_book_1 = opt_book[market_index*MARKET_SIZE:(market_index+1)*MARKET_SIZE]
149  	                                opt_buy_book, opt_sell_book = add_noise_orderbook(opt_book_1, NOISE)
150  	
151  	                                print(f'#####Generating market {market_index} with size {BOOK_SIZE} and noise {NOISE}#####')
152  	                                print(f"Starting computation for iteration {market_index}")
153  	
154  	                                filename = f'corrected_testing_combo_frontier_market_index_{market_index}_book_size_{BOOK_SIZE}_{stock_name}_NOISE_{NOISE}'
155  	                                column_names = ['option1', 'option2', 'C=Call, P=Put', 'Strike Price of the Option Times 1000', 'transaction_type', 'B/A_price']
156  	                                opt_order_df = pd.DataFrame(np.concatenate([opt_buy_book, opt_sell_book], axis=0), columns=column_names)
157  	
158  	                                market = Market(opt_order_df, mechanism_solver=mechanism_solver_combo)
159  	                                is_match, profit = market.check_match()
160  	                                if is_match:
161  	                                    market.remove_matched_orders()
162  	
163  	                                frontier_option_label = market.epsilon_frontierGeneration(offset=args.offset)
164  	
165  	                                if frontier_option_label is not None:
166  	                                    print(f"Successfully completed iteration {market_index}")
167  	
168  	                                    if not os.path.exists(directory_path):
169  	                                        os.makedirs(directory_path)
170  	
171  	                                    save_path = os.path.join(directory_path, filename + '.pkl')
172  	                                    print(f"Saving to: {save_path}")
173  	
174  	                                    with open(save_path, 'wb') as f:
175  	                                        pickle.dump(frontier_option_label, f)
176  	
177  	                                    wandb.log({
178  	                                        f'market_{market_index}/metadata': {
179  	                                            'num_stock': NUM_STOCK,
180  	                                            'stock_name': stock_name,
181  	                                            'noise': NOISE,
182  	                                            'book_size': BOOK_SIZE,
183  	                                            'market_index': market_index
184  	                                        }
185  	                                    })
186  	
187  	                                    artifact.add_file(save_path, name=f'{filename}.pkl')
188  	                                    print(f"Successfully saved iteration {market_index}")
189  	                                    breakpoint()
190  	                                else:
191  	                                    print(f"Iteration {market_index} returned None")
192  	
193  	                            except TimeoutError:
194  	                                print(f"Market {market_index} processing timed out")
195  	                                continue
196  	                            except Exception as e:
197  	                                print(f"Error processing market {market_index}: {str(e)}")
198  	                                traceback.print_exc()
199  	                                continue
200  	
201  	                        run.log_artifact(artifact)
202  	
203  	                    except Exception as e:
204  	                        print(f"Error processing seed {i}: {str(e)}")
205  	                        traceback.print_exc()
206  	                        continue
207  	
208  	    except Exception as e:
209  	        print(f"Error in main: {str(e)}")
210  	        traceback.print_exc()
211  	        raise e
'/common/home/hg343/Research/accelerate_combo_option/data/combo_2_test/corrected_testing_combo_frontier_market_index_0_book_size_50_AAPL_MSFT_NOISE_0.015625.pkl'
    option1  option2  C=Call, P=Put  ...  B/A_price  liquidity  belongs_to_frontier
0      -3.0      5.0           -1.0  ...      68.04          1                  0.0
1       1.0      3.0            1.0  ...      63.33          1                  1.0
3       2.0     -1.0           -1.0  ...      36.19          1                  1.0
4      -2.0      9.0            1.0  ...     156.18          1                  1.0
5       1.0      7.0            1.0  ...     186.12          1                  1.0
6       2.0     -1.0           -1.0  ...      19.82          1                  1.0
7       6.0      5.0            1.0  ...     182.73          1                  1.0
8       3.0      1.0            1.0  ...     107.05          1                  1.0
9       1.0      1.0            1.0  ...       0.52          1                  1.0
10      4.0      1.0           -1.0  ...      22.92          1                  1.0
11      3.0      2.0            1.0  ...     106.16          1                  1.0
12      3.0      1.0           -1.0  ...      53.02          1                  1.0
13      2.0     -1.0           -1.0  ...       2.35          1                  1.0
14      1.0     -2.0           -1.0  ...      65.73          1                  NaN
16      2.0      1.0           -1.0  ...       0.02          1                  1.0
17      7.0      5.0           -1.0  ...     226.09          1                  1.0
18      1.0      1.0           -1.0  ...      57.90          1                  1.0
19     -2.0      7.0            1.0  ...     169.38          1                  0.0
20     -5.0      7.0           -1.0  ...      28.41          1                  0.0
21      1.0      6.0           -1.0  ...      73.64          1                  0.0
22      4.0      9.0            1.0  ...     156.52          1                  1.0
23      5.0     -3.0            1.0  ...      90.72          1                  1.0
24      8.0      5.0           -1.0  ...       0.30          1                  1.0
25      2.0     -3.0           -1.0  ...      53.73          1                  1.0
26      3.0      2.0           -1.0  ...     149.36          1                  1.0
27      8.0     -7.0            1.0  ...      11.82          1                  1.0
28      1.0     -1.0            1.0  ...       1.03          1                  1.0
31      8.0     -5.0            1.0  ...     174.67          1                  1.0
32      3.0      8.0           -1.0  ...     176.88          1                  1.0
36     -4.0      7.0            1.0  ...      30.24          1                  1.0
38      6.0      1.0           -1.0  ...      10.59          1                  1.0
39      5.0     -1.0            1.0  ...       4.05          1                  NaN
41      2.0      1.0           -1.0  ...       1.24          1                  1.0
42      6.0      5.0            1.0  ...      13.98          1                  1.0
43      2.0      1.0           -1.0  ...      26.91          1                  1.0
46      4.0      7.0            1.0  ...      69.58          1                  1.0
48      8.0     -3.0           -1.0  ...       9.87          1                  1.0
[37 rows x 8 columns]
    transaction_type  B/A_price  liquidity  belongs_to_frontier
0                1.0      68.04          1                  0.0
1                1.0      63.33          1                  1.0
3                1.0      36.19          1                  1.0
4                1.0     156.18          1                  1.0
5                1.0     186.12          1                  1.0
6                1.0      19.82          1                  1.0
7                1.0     182.73          1                  1.0
8                1.0     107.05          1                  1.0
9                1.0       0.52          1                  1.0
10               1.0      22.92          1                  1.0
11               1.0     106.16          1                  1.0
12               1.0      53.02          1                  1.0
13               1.0       2.35          1                  1.0
14               1.0      65.73          1                  NaN
16               1.0       0.02          1                  1.0
17               1.0     226.09          1                  1.0
18               1.0      57.90          1                  1.0
19               1.0     169.38          1                  0.0
20               1.0      28.41          1                  0.0
21               1.0      73.64          1                  0.0
22               1.0     156.52          1                  1.0
23               1.0      90.72          1                  1.0
24               1.0       0.30          1                  1.0
25               0.0      53.73          1                  1.0
26               0.0     149.36          1                  1.0
27               0.0      11.82          1                  1.0
28               0.0       1.03          1                  1.0
31               0.0     174.67          1                  1.0
32               0.0     176.88          1                  1.0
36               0.0      30.24          1                  1.0
38               0.0      10.59          1                  1.0
39               0.0       4.05          1                  NaN
41               0.0       1.24          1                  1.0
42               0.0      13.98          1                  1.0
43               0.0      26.91          1                  1.0
46               0.0      69.58          1                  1.0
48               0.0       9.87          1                  1.0
Generating frontier for markets:   0%|                                                                | 0/20 [12:16<?, ?it/s]
Traceback (most recent call last):
  File "/common/home/hg343/Research/accelerate_combo_option/src/combo_stock_frontier_data_preprocessor_forked.py", line 145, in <module>
    for market_index in tqdm(range(0, num_books), desc=f'Generating frontier for markets'):
  File "/common/home/hg343/Research/accelerate_combo_option/src/combo_stock_frontier_data_preprocessor_forked.py", line 145, in <module>
    for market_index in tqdm(range(0, num_books), desc=f'Generating frontier for markets'):
  File "/common/home/hg343/anaconda3/lib/python3.9/bdb.py", line 88, in trace_dispatch
    return self.dispatch_line(frame)
  File "/common/home/hg343/anaconda3/lib/python3.9/bdb.py", line 113, in dispatch_line
    if self.quitting: raise BdbQuit
bdb.BdbQuit
Generating frontier for markets:   0%|                                                                | 0/20 [00:01<?, ?it/s]
Traceback (most recent call last):
  File "/common/home/hg343/Research/accelerate_combo_option/src/combo_stock_frontier_data_preprocessor_forked.py", line 163, in <module>
    frontier_option_label = market.epsilon_frontierGeneration(offset=args.offset)
  File "/common/home/hg343/Research/accelerate_combo_option/src/market.py", line 338, in epsilon_frontierGeneration
    is_match, profit = self.check_match(orders)
  File "/common/home/hg343/Research/accelerate_combo_option/src/market.py", line 82, in check_match
    is_match, profit = self.apply_mechanism(orders, offset=offset)
  File "/common/home/hg343/Research/accelerate_combo_option/src/market.py", line 137, in apply_mechanism
    result = async_result.get(timeout=timeout)
  File "/common/home/hg343/anaconda3/lib/python3.9/multiprocessing/pool.py", line 765, in get
    self.wait(timeout)
  File "/common/home/hg343/anaconda3/lib/python3.9/multiprocessing/pool.py", line 762, in wait
    self._event.wait(timeout)
  File "/common/home/hg343/anaconda3/lib/python3.9/threading.py", line 574, in wait
    signaled = self._cond.wait(timeout)
  File "/common/home/hg343/anaconda3/lib/python3.9/threading.py", line 316, in wait
    gotit = waiter.acquire(True, timeout)
  File "/common/home/hg343/Research/accelerate_combo_option/src/combo_stock_frontier_data_preprocessor_forked.py", line 60, in signal_handler
    sys.exit(1)
  File "/common/home/hg343/anaconda3/lib/python3.9/site-packages/wandb/sdk/lib/exit_hooks.py", line 36, in exit
    self._orig_exit(orig_code)  # type: ignore
SystemExit: 1
Error processing seed 2:
There are 36 buy orders and 14 sell orders
#####Generating market 0 with size 50 and noise 0.015625#####
Starting computation for iteration 0
checking match False -0.0
Ctrl+C received. Terminating processes...