Generating frontier for markets:   0%|                                                               | 0/19 [00:00<?, ?it/s]/common/home/hg343/Research/accelerate_combo_option/src/market.py:274: FutureWarning: The default dtype for empty Series will be 'object' instead of 'float64' in a future version. Specify a dtype explicitly to silence this warning.
  frontier_labels = pd.Series(None, index=orders.index)
/common/home/hg343/Research/accelerate_combo_option/src/market.py:275: FutureWarning: The default dtype for empty Series will be 'object' instead of 'float64' in a future version. Specify a dtype explicitly to silence this warning.
  quote_prices = pd.Series(None, index=orders.index)  # Create a Series to store quote prices
There are 27 buy orders and 23 sell orders
#####Generating market 1 with size 50 and noise 0.015625#####
Starting computation for iteration 1
checking match False 0
Processing order 0 (1/50)
checking match False 0
No valid quote price for order 0
Processing order 1 (2/50)
checking match False 0
No valid quote price for order 1
Processing order 2 (3/50)
checking match False 0
No valid quote price for order 2
Processing order 3 (4/50)
checking match False 0
No valid quote price for order 3
Processing order 4 (5/50)
checking match False 0
No valid quote price for order 4
Processing order 5 (6/50)
checking match False 0
No valid quote price for order 5
Processing order 6 (7/50)
checking match False 0
No valid quote price for order 6
Processing order 7 (8/50)
checking match False 0
No valid quote price for order 7
Processing order 8 (9/50)
checking match False 0
No valid quote price for order 8
Processing order 9 (10/50)
checking match False 0
No valid quote price for order 9
Processing order 10 (11/50)
checking match False 0
No valid quote price for order 10
Processing order 11 (12/50)
checking match False 0
No valid quote price for order 11
Processing order 12 (13/50)
checking match False 0
No valid quote price for order 12
Processing order 13 (14/50)
checking match False 0
No valid quote price for order 13
Processing order 14 (15/50)
checking match False 0
No valid quote price for order 14
Processing order 15 (16/50)
checking match False 0
No valid quote price for order 15
Processing order 16 (17/50)
checking match False 0
No valid quote price for order 16
Processing order 17 (18/50)
checking match False 0
No valid quote price for order 17
Processing order 18 (19/50)
checking match False 0
No valid quote price for order 18
Processing order 19 (20/50)
checking match False 0
No valid quote price for order 19
Processing order 20 (21/50)
checking match False 0
No valid quote price for order 20
Processing order 21 (22/50)
checking match False 0
No valid quote price for order 21
Processing order 22 (23/50)
checking match False 0
No valid quote price for order 22
Processing order 23 (24/50)
checking match False 0
No valid quote price for order 23
Processing order 24 (25/50)
checking match False 0
No valid quote price for order 24
Processing order 25 (26/50)
checking match False 0
No valid quote price for order 25
Processing order 26 (27/50)
checking match False 0
No valid quote price for order 26
Processing order 27 (28/50)
checking match False 0
No valid quote price for order 27
Processing order 28 (29/50)
checking match False 0
No valid quote price for order 28
Processing order 29 (30/50)
checking match False 0
No valid quote price for order 29
Processing order 30 (31/50)
checking match False 0
No valid quote price for order 30
Processing order 31 (32/50)
checking match False 0
No valid quote price for order 31
Processing order 32 (33/50)
checking match False 0
No valid quote price for order 32
Processing order 33 (34/50)
checking match False 0
No valid quote price for order 33
Processing order 34 (35/50)
checking match False 0
No valid quote price for order 34
Processing order 35 (36/50)
checking match False 0
No valid quote price for order 35
Processing order 36 (37/50)
checking match False 0
No valid quote price for order 36
Processing order 37 (38/50)
checking match False 0
No valid quote price for order 37
Processing order 38 (39/50)
checking match False 0
No valid quote price for order 38
Processing order 39 (40/50)
checking match False 0
No valid quote price for order 39
Processing order 40 (41/50)
checking match False 0
No valid quote price for order 40
Processing order 41 (42/50)
checking match False 0
No valid quote price for order 41
Processing order 42 (43/50)
checking match False 0
No valid quote price for order 42
Processing order 43 (44/50)
checking match False 0
No valid quote price for order 43
Processing order 44 (45/50)
checking match False 0
No valid quote price for order 44
Processing order 45 (46/50)
checking match False 0
No valid quote price for order 45
Processing order 46 (47/50)
/common/home/hg343/Research/accelerate_combo_option/src/market.py:274: FutureWarning: The default dtype for empty Series will be 'object' instead of 'float64' in a future version. Specify a dtype explicitly to silence this warning.
  frontier_labels = pd.Series(None, index=orders.index)
/common/home/hg343/Research/accelerate_combo_option/src/market.py:275: FutureWarning: The default dtype for empty Series will be 'object' instead of 'float64' in a future version. Specify a dtype explicitly to silence this warning.
  quote_prices = pd.Series(None, index=orders.index)  # Create a Series to store quote prices
checking match False 0
No valid quote price for order 46
Processing order 47 (48/50)
checking match False 0
No valid quote price for order 47
Processing order 48 (49/50)
checking match False 0
No valid quote price for order 48
Processing order 49 (50/50)
checking match False 0
No valid quote price for order 49
    option1  option2  C=Call, P=Put  ...  B/A_price  liquidity  belongs_to_frontier
0       5.0     -6.0           -1.0  ...     340.29          1                  NaN
1       5.0      2.0           -1.0  ...       0.53          1                  NaN
2       2.0     -1.0            1.0  ...       0.03          1                  NaN
3       1.0      3.0            1.0  ...      45.18          1                  NaN
4       1.0      1.0           -1.0  ...      20.76          1                  NaN
5       8.0     -7.0            1.0  ...       0.09          1                  NaN
6      -1.0      2.0           -1.0  ...      13.61          1                  NaN
7       2.0     -1.0            1.0  ...       0.03          1                  NaN
8       3.0      7.0            1.0  ...      41.36          1                  NaN
9       4.0      1.0            1.0  ...      58.19          1                  NaN
10      7.0      2.0            1.0  ...     147.13          1                  NaN
11     -2.0      9.0            1.0  ...     273.80          1                  NaN
12      7.0      3.0            1.0  ...     356.76          1                  NaN
13      3.0     -1.0           -1.0  ...       0.02          1                  NaN
14     -1.0      9.0           -1.0  ...       0.06          1                  NaN
15      3.0      1.0           -1.0  ...       0.04          1                  NaN
16      4.0     -5.0            1.0  ...      63.68          1                  NaN
17      9.0     -2.0           -1.0  ...     141.41          1                  NaN
18      3.0      1.0            1.0  ...      87.64          1                  NaN
19      5.0      4.0           -1.0  ...       0.08          1                  NaN
20      5.0      1.0            1.0  ...       3.11          1                  NaN
21      5.0     -3.0           -1.0  ...     218.33          1                  NaN
22      3.0     -4.0           -1.0  ...       7.03          1                  NaN
23      4.0     -3.0           -1.0  ...       3.78          1                  NaN
24      4.0      5.0            1.0  ...     154.96          1                  NaN
25      1.0     -1.0           -1.0  ...      22.04          1                  NaN
26      9.0     -2.0            1.0  ...     191.55          1                  NaN
27      9.0      1.0            1.0  ...       0.27          1                  NaN
28      8.0     -3.0           -1.0  ...       5.00          1                  NaN
29      9.0      2.0           -1.0  ...     433.82          1                  NaN
30      8.0      5.0           -1.0  ...       0.25          1                  NaN
31      2.0      3.0            1.0  ...      14.93          1                  NaN
32      7.0      6.0           -1.0  ...       1.82          1                  NaN
33      2.0     -1.0            1.0  ...      21.06          1                  NaN
34      7.0     -4.0            1.0  ...       0.68          1                  NaN
35      3.0     -1.0           -1.0  ...       2.19          1                  NaN
36      1.0      1.0            1.0  ...       0.05          1                  NaN
37      8.0      9.0           -1.0  ...       2.33          1                  NaN
38      8.0      1.0           -1.0  ...     361.41          1                  NaN
39     -1.0      3.0           -1.0  ...       0.15          1                  NaN
40     -1.0      4.0            1.0  ...      60.86          1                  NaN
41      6.0     -5.0            1.0  ...     162.40          1                  NaN
42      9.0      8.0            1.0  ...      90.03          1                  NaN
43      7.0      2.0           -1.0  ...       2.41          1                  NaN
44      9.0      7.0           -1.0  ...      62.63          1                  NaN
45     -3.0      8.0            1.0  ...     355.73          1                  NaN
46      4.0      5.0           -1.0  ...       0.86          1                  NaN
47      1.0      4.0            1.0  ...      40.26          1                  NaN
48      5.0      8.0           -1.0  ...       6.37          1                  NaN
49      7.0     -4.0            1.0  ...       0.11          1                  NaN
[50 rows x 8 columns]
checking match False 0
Processing order 0 (1/50)
checking match False 0
No valid quote price for order 0
Processing order 1 (2/50)
checking match False 0
No valid quote price for order 1
Processing order 2 (3/50)
checking match False 0
No valid quote price for order 2
Processing order 3 (4/50)
checking match False 0
No valid quote price for order 3
Processing order 4 (5/50)
checking match False 0
No valid quote price for order 4
Processing order 5 (6/50)
checking match False 0
No valid quote price for order 5
Processing order 6 (7/50)
checking match False 0
No valid quote price for order 6
Processing order 7 (8/50)
checking match False 0
No valid quote price for order 7
Processing order 8 (9/50)
checking match False 0
No valid quote price for order 8
Processing order 9 (10/50)
checking match False 0
No valid quote price for order 9
Processing order 10 (11/50)
checking match False 0
No valid quote price for order 10
Processing order 11 (12/50)
checking match False 0
No valid quote price for order 11
Processing order 12 (13/50)
checking match False 0
No valid quote price for order 12
Processing order 13 (14/50)
checking match False 0
Ctrl+C received. Terminating processes...
Generating frontier for markets:   0%|                                                               | 0/19 [00:18<?, ?it/s]
Traceback (most recent call last):
  File "/common/home/hg343/Research/accelerate_combo_option/src/combo_stock_frontier_data_preprocessor_forked.py", line 164, in <module>
    frontier_option_label_epsilon, quote_price_epsilon = market.epsilon_frontierGeneration(offset=args.offset)
  File "/common/home/hg343/Research/accelerate_combo_option/src/market.py", line 360, in epsilon_frontierGeneration
    labeled_orders, quote_prices = self.frontierGeneration(orders, epsilon = True, offset = offset)
  File "/common/home/hg343/Research/accelerate_combo_option/src/market.py", line 301, in frontierGeneration
    quote_price = self.priceQuote(order, temp_orders, offset=offset)
  File "/common/home/hg343/Research/accelerate_combo_option/src/market.py", line 209, in priceQuote
    is_match, objVal = self.apply_mechanism(market_orders, offset)
  File "/common/home/hg343/Research/accelerate_combo_option/src/market.py", line 137, in apply_mechanism
    result = async_result.get(timeout=timeout)
  File "/common/home/hg343/anaconda3/lib/python3.9/multiprocessing/pool.py", line 765, in get
    self.wait(timeout)
  File "/common/home/hg343/anaconda3/lib/python3.9/multiprocessing/pool.py", line 762, in wait
    self._event.wait(timeout)
  File "/common/home/hg343/anaconda3/lib/python3.9/threading.py", line 574, in wait
    signaled = self._cond.wait(timeout)
  File "/common/home/hg343/anaconda3/lib/python3.9/threading.py", line 316, in wait
    gotit = waiter.acquire(True, timeout)
  File "/common/home/hg343/Research/accelerate_combo_option/src/combo_stock_frontier_data_preprocessor_forked.py", line 58, in signal_handler
    pool.terminate()
  File "/common/home/hg343/anaconda3/lib/python3.9/multiprocessing/pool.py", line 654, in terminate
    self._terminate()
  File "/common/home/hg343/anaconda3/lib/python3.9/multiprocessing/util.py", line 224, in __call__
    res = self._callback(*self._args, **self._kwargs)
  File "/common/home/hg343/anaconda3/lib/python3.9/multiprocessing/pool.py", line 692, in _terminate_pool
    cls._help_stuff_finish(inqueue, task_handler, len(pool))
  File "/common/home/hg343/anaconda3/lib/python3.9/multiprocessing/pool.py", line 672, in _help_stuff_finish
    inqueue._rlock.acquire()
  File "/common/home/hg343/Research/accelerate_combo_option/src/combo_stock_frontier_data_preprocessor_forked.py", line 60, in signal_handler
    sys.exit(1)
  File "/common/home/hg343/anaconda3/lib/python3.9/site-packages/wandb/sdk/lib/exit_hooks.py", line 36, in exit
    self._orig_exit(orig_code)  # type: ignore
SystemExit: 1
Ctrl+C received. Terminating processes...